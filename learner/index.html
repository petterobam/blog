<!doctype HTML>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/>
    <title>我的学习笔记</title>
    <style>
        body {
            color: #333;
            font-family: sans-serif;
            font-size: 12pt;
            line-height: 170%;
            padding: 0 30px 0 270px;
            background-color: #e3e4de;
        }

        header .banner {
            margin: 0 0 1em 0;
        }

        header .banner, nav .banner {
            color: #777;
            font-size: 10pt;
            font-weight: bold;
        }

        header h1 {
            background: #86a78e;
            border-radius: 4px;
            color: #fff;
            font-size: 24pt;
            margin: 0;
            padding: 1.2em 0;
            text-align: center;
            line-height: normal;
        }

        nav {
            font-size: 10pt;
            overflow-x: hidden;
            overflow-y: auto;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            width: 240px;
            background-color: #b1b9b2;
        }

        nav .menubar {
            border-bottom: solid 1px #ccc;
            display: none;
            height: 48px;
            line-height: 48px;
            padding: 0 10px;
        }

        nav .small-title{
          color: #313354;
          font-size: 10pt;
          font-weight: bold;
          padding: 8px;
          display: inline;
        }

        nav .button {
            background: #777;
            border: 1px solid #333;
            color: #fff;
            font-size: 10pt;
            font-weight: bold;
            padding: 8px;
            border-radius: 4px;
            cursor: pointer;
        }

        nav .button_active{
            border: 1px solid #333;
            font-size: 10pt;
            font-weight: bold;
            padding: 8px;
            border-radius: 4px;
            cursor: pointer;
            background-color: #E8D86A;
            color: #7879DA;
        }

        nav ul {
            padding: 0 0 0 10px;
        }

        nav ul a {
            color: #333;
            text-decoration: none;
            display: inline;
            padding-left: 10px;
            padding-right: 10px;
        }
        nav ul a a{
            padding-left: 0px;
            padding-right: 0px;
        }

        nav ul a:hover {
            text-decoration: underline;
        }

        nav ul a:visited{
            background-color: #DADEFA;
        }

        nav li {
            line-height: 180%;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        nav .level2 {
            font-size: 11pt;
            font-weight: bold;
        }

        nav .level3 {
            padding-left: 1em;
        }

        nav .level3:before {
            content: "» ";
        }

        nav .level4 {
            padding-left: 2em;
        }

        nav .level4:before {
            content: "› ";
        }

        article h2 {
            border-bottom: dotted 1px #777;
            font-size: 12pt;
            line-height: 100%;
            margin: 4em 0 1em 0;
            padding: 0 0 0.3em 0;
        }

        article h3 {
            font-size: 12pt;
            line-height: 100%;
            margin: 2em 0 1em 0;
            padding: 0;
        }

        article h4 {
            font-size: 12pt;
            font-style: italic;
            font-weight: normal;
            line-height: 100%;
            margin: 1.2em 0 1em 0;
            padding: 0;
        }

        article p {
            margin: 1em 0;
        }

        article p code {
            background: #eee;
            border: 1px solid #ccc;
            padding: 5px;
        }

        article p strong {
            color: #f00;
        }

        article pre {
            background: #eee;
            border-left: solid 2px #3c0;
            font-size: 10pt;
            margin: 1em 0;
            padding: 0 0 0 1em;
            overflow-x: auto;
            overflow-y: padding;
        }

        article blockquote {
            background: #fff;
            border: dashed 1px #777;
            border-left: solid 2px #777;
            color: #000;
            margin: 0;
            padding: 0 0 0 1em;
        }

        article ul, article ol {
            padding-left: 2em;
        }

        footer {
            border-top: 1px solid #ccc;
            font-size: 10pt;
            margin-top: 4em;
        }

        @media (max-width: 768px) {

            body {
                padding: 0 10px 0 230px;
            }

            nav {
                width: 230px;
            }

        }

        @media (max-width: 480px) {

            body {
                padding: 64px 10px 0 10px;
            }

            header .banner {
                display: none;
            }

            nav {
                position: fixed;
                top: 0;
                overflow-y: hidden;
                width: 100%;
                height: 48px;
            }

            nav .menubar {
                display: block;
            }

            nav .banner {
                float: right;
            }

            nav ul {
                background: #fff;
                font-size: 14pt;
                margin: 0;
                padding: 0 0 0 8px;
            }

            nav #java-nav-directory,#js-nav-directory{
                display: none;
                height: 90%;
                overflow-y: auto;
            }

            nav ul a:active{
                color: #ABCDEF;
            }

            nav .level2 {
                font-size: 16pt;
                font-weight: bold;
            }

            nav li {
                line-height: 240%;
            }

            .index nav ul {
                display: block;
            }

            .index article {
                display: none;
            }

        }
        img {
          max-width: 100%;
        }
        table {
        	font-family: verdana,arial,sans-serif;
        	font-size:11px;
        	color:#333333;
        	border-width: 1px;
        	border-color: #666666;
        	border-collapse: collapse;
        }
        table th {
        	border-width: 1px;
        	padding: 8px;
        	border-style: solid;
        	border-color: #666666;
        	background-color: #a9c7af;
        }
        table td {
        	border-width: 1px;
        	padding: 8px;
        	border-style: solid;
        	border-color: #666666;
        	background-color: #ffffff;
        }
        table tr:hover > td {
          background-color: #d4e3e5;
        }
    </style>
    <link rel="stylesheet" href="static/css/prism.css"/>
    <script>
        (function (tags) {
            var i = 0, len = tags.length;

            for (; i < len; ++i) {
                document.createElement(tags[i]);
            }
        }(['header', 'nav', 'article', 'footer']));
    </script>
</head>
<body>
<header>
    <h1 id="big-title">我的学习笔记</h1>
</header>
<nav>
    <div id="menubarDiv" class="menubar">
        <a class="button" id="mediaMenubar">&#9776;&nbsp;目录索引</a><span class="small-title">我的学习笔记</span>
    </div>
    <div id="java-nav-directory"></div>
    <div id="js-nav-directory"></div>
</nav>
<article id="article-content">
<h1><a href="#github个人博客部署" name="github个人博客部署"></a>Github个人博客部署</h1>
<h2><a href="#安装ruby" name="安装ruby"></a>安装ruby</h2>
<p>下载地址：https://rubyinstaller.org/downloads</p>
<p><img src="github-blog/1.png" alt="ruby下载" /></p>
<p>Ruby安装完，cmd命令</p>
<pre><code class="cmd">ruby -v
gem -v
</code></pre>
<p><img src="github-blog/2.png" alt="DevKit下载" /></p>
<p>DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe运行，解压目录如下</p>
<p><img src="github-blog/3.png" alt="DevKit解压" /></p>
<h2><a href="#安装-msys2" name="安装-msys2"></a>安装 msys2</h2>
<p>下载地址：http://sourceforge.net/projects/msys2</p>
<h2><a href="#安装-jeky-bundler" name="安装-jeky-bundler"></a>安装 jeky、bundler</h2>
<pre><code class="cmd">gem install jekyll bundler
</code></pre>
<p>如果出错，尝试 <code>gem install jekyll -v 3.3</code> 或 <code>gem update</code></p>
<h2><a href="#新建jekyll博客" name="新建jekyll博客"></a>新建jekyll博客</h2>
<pre><code class="cmd">jekyll new my-blog
</code></pre>
<pre><code class="cmd">cd my-blog
</code></pre>
<p>删除默认md文件、Gemfile.lock和_XX目录</p>
<h2><a href="#采用主题" name="采用主题"></a>采用主题</h2>
<p><a href="https://github.com/yizeng/jekyll-theme-simple-texture/tree/master/starter-kit">https://github.com/yizeng/jekyll-theme-simple-texture/tree/master/starter-kit</a><br/>下载该主题，并覆盖my-blog下面的文件</p>
<p>将你的markdown文件放置于 <code>_post</code> 文件夹下面，可以自己创建文件夹给markdown分类</p>
<p><img src="github-blog/4.png" alt="markdown文件目录" /></p>
<p>文件名命名：日期-文件名（最好是英文的名字）</p>
<p><img src="github-blog/5.png" alt="markdown文件" /></p>
<p>因为这个关系到每个博客的http路径，带中文容易出问题</p>
<p><img src="github-blog/6.png" alt="http路径" /></p>
<p>命令行下：<code>bundle install</code></p>
<p>命令行下：<code>bundle exec jekyll serve</code></p>
<p><img src="github-blog/7.png" alt="命令截图" /></p>
<p>然后打开 <a href="http://localhost:4000/">http://localhost:4000/</a></p>
<p><img src="github-blog/8.png" alt="预览" /></p>
<p><img src="github-blog/9.png" alt="预览" /></p>
<p><img src="github-blog/10.png" alt="预览" /></p>
<p>其中 <code>_config.yml</code> 和 <code>_data</code> 文件夹下面的yml文件控制着页面一些元素的文本显示</p>
<p><img src="github-blog/11.png" alt="配置" /></p>
<p><img src="github-blog/12.png" alt="配置" /></p>
<h2><a href="#推送到github" name="推送到github"></a>推送到github</h2>
<p>摸索实验就可以发现修改界面的规律，在本地调好后就可以将 my-blog下面的文件推到github</p>
<p><img src="github-blog/13.png" alt="推送到github" /></p>
<h2><a href="#域名绑定" name="域名绑定"></a>域名绑定</h2>
<p>开启github page ， 并绑定你的域名</p>
<p><img src="github-blog/14.png" alt="绑定域名" /></p>
<p>然后，在阿里云或其他域名解析处添加 A记录 和 @记录，指定的IP可以ping下自己github.io的IP。</p>
<p><img src="github-blog/15.png" alt="获取IP" /></p>
<p>然后访问 www.petterobam.cn ，OK</p>
<p><img src="github-blog/16.png" alt="预览测试" /></p>
<h2><a href="#额外情况" name="额外情况"></a>额外情况</h2>
<p><a href="https://github.com/jekyller/jasper2">https://github.com/jekyller/jasper2</a><br/>如果是非标准的jekyll主题，还需要travis-ci辅助编译，并将静态页面发布到 对应github项目的 gh-pages 分支</p>
<p>具体细节需要注意的有：</p>
<ol>
  <li>到你的github 获取 GH-TOKEN<br/><a href="https://github.com/settings/tokens">https://github.com/settings/tokens</a><br/>为公共仓库启用“public_repo”访问权限<br/>然后记住他展示的TOKEN，因为那个只显示一次</li>
</ol>
<p><img src="github-blog/17.png" alt="GH-TOKEN获取" /></p>
<ol>
  <li>Travis-ci 需要添加额外属性，主要包括GH-TOKEN、GIT_NAME、GIT_EMAIL，例如：</li>
</ol>
<p><img src="github-blog/18.png" alt="Travis-ci配置" /></p>
<ol>
  <li>[可选]在你的电脑上安装travis，并生成travis-encrypt</li>
</ol>
<pre><code class="cmd">gem install travis
travis encrypt &lt;api-token&gt;
</code></pre>
<p>其中 <code>&lt;api-token&gt;</code> 就是你在travis定义的额外属性，形如：</p>
<pre><code>&#39;GIT_NAME=&quot;YOUR_USERNAME&quot; GIT_EMAIL=&quot;YOUR_EMAIL&quot; GH_TOKEN=YOUR_TOKEN&#39;
</code></pre>
<p>然后这个 <code>travis-encrypt</code> 用在 <code>.travis.yml</code> 文件中，形如：</p>
<p><img src="github-blog/19.png" alt="Travis-ci配置" /></p>
<ol>
  <li>更多详细信息请参见 jekyll-travis：https://github.com/mfenner/jekyll-travis</li>
</ol>
<p>额外情况博客部署效果图</p>
<p><img src="github-blog/20.png" alt="额外情况博客部署效果图" /></p>
<h2><a href="#集成博客评论系统" name="集成博客评论系统"></a>集成博客评论系统</h2>
<p>基于 <code>github issue</code><br/><a href="https://github.com/settings/applications/new">https://github.com/settings/applications/new</a></p>
<p>申请OAuth application</p>
<p><img src="github-blog/21.png" alt="申请OAuth" /></p>
<h2><a href="#让域名支持https" name="让域名支持https"></a>让域名支持HTTPS</h2>
<p>这个东西不强求，但是会在浏览器地址栏有个绿色的小锁（逼格.png）</p>
<p><a href="https://jingyan.baidu.com/article/f79b7cb3309be79144023ea4.html">https://jingyan.baidu.com/article/f79b7cb3309be79144023ea4.html</a></p>
<p>或者用 cloudflare 加持 https：https://www.cloudflare.com/</p><h1><a href="#jvm工具学习笔记" name="jvm工具学习笔记"></a>JVM工具学习笔记</h1>
<h2><a href="#原生工具" name="原生工具"></a>原生工具</h2>
<ol>
  <li>
    <p>
    <p>Cmd控制台： <code>jconsole</code> 回车，可以直接打开 java 监视管理控制台</p></p>
    <p><img src="jvm-debug/1.png" alt="jconsole监控" /></p>
  </li>
  <li>
    <p>Cmd控制台 <code>jsp</code> ，查看运行中的java进程pid</p>
    <p><img src="jvm-debug/2.png" alt="jsp命令" /></p>
    <p><img src="jvm-debug/3.png" alt="jsp help" /></p>
    <pre><code class="cmd line-numbers">-q 不输出类名、Jar名和传入main方法的参数
-m 输出传入main方法的参数
-l 输出main类或Jar的全限名
-v 输出传入JVM的参数
</code></pre>
  </li>
  <li>
    <p>Cmd控制台：<code>jstack pid</code> ，查看进程堆栈信息</p>
    <p><img src="jvm-debug/4.png" alt="jstack" /></p>
  </li>
  <li>
    <p>jmap&amp;jhat</p>
    <ul>
      <li>Cmd控制台: <code>jmap -dump:live,file=xxx.map [正在运行java的进程PID]</code>，可以导出进程JAVA相关信息，例如：<code>jmap -dump:live,file=visa-asms-link.map 16664</code></li>
      <li>Cmd控制台: <code>jhat -J-Xmx512m -port 7000 visa-asms-link.map</code> ，可以启动简单预览的WEB服务</li>
    </ul>
    <p><a href="http://localhost:7000/  这里看到所有的类；">http://localhost:7000/  这里看到所有的类；</a><br/>进入oql查询界面   http://localhost:7000/oql/；<br/>具体OQL用法可见：http://localhost:7000/oqlhelp/</p>
    <p><img src="jvm-debug/5.png" alt="jmap&amp;jhat" /></p>
    <pre><code class="cmd line-numbers">B  byte
C  char
D  double
F  float
I  int
J  long
Z  boolean
[  数组，如[I表示int[]
[L+类名 其他对象
</code></pre>
    <p>最下面有其他信息链接：</p>
    <p><img src="jvm-debug/6.png" alt="other query" /></p>
    <p>下载软件：Java VisualVM工具，连接某个线程后，点击head dump也可以查看和jmap&amp;jhat实现的功能。</p>
  </li>
  <li>
    <p>Cmd命令: <code>jstat</code>（JVM统计监测工具）</p>
    <p><img src="jvm-debug/7.png" alt="jstat1" /></p>
    <p><img src="jvm-debug/8.png" alt="jstat2" /></p>
    <pre><code class="cmd line-numbers">S0C、S1C、S0U、S1U：Survivor 0/1区容量（Capacity）和使用量（Used）
EC、EU：Eden区容量和使用量
OC、OU：年老代容量和使用量
PC、PU：永久代容量和使用量
YGC、YGT：年轻代GC次数和GC耗时
FGC、FGCT：Full GC次数和Full GC耗时
GCT：GC总耗时
</code></pre>
  </li>
  <li>
    <p>Cmd命令：<code>jcmd</code></p>
    <p><img src="jvm-debug/9.png" alt="jcmd" /></p>
    <pre><code class="cmd line-numbers">jcmd 31275 Thread.print -l # 打印线程栈
jcmd 31275 VM.command_line # 打印启动命令及参数
jcmd 31275 GC.heap_dump /data/31275.dump # dump heap
jcmd 31275 GC.class_histogram #查看类的统计信息
jcmd 31275 VM.system_properties #查看系统属性内容
jcmd 31275 VM.uptime #查看虚拟机启动时间
jcmd 31275 PerfCounter.print #查看性能统计
</code></pre>
  </li>
</ol><h1><a href="#maven学习笔记" name="maven学习笔记"></a>Maven学习笔记</h1>
<h2><a href="#maven安装" name="maven安装"></a>Maven安装</h2>
<p>解压 <a href="https://maven.apache.org/download.cgi">https://maven.apache.org/download.cgi</a> 最新版<br/>配置 <code>MAVEN_HOME</code> 解压根目录，编辑环境变量 <code>Path</code>，追加 <code>%MAVEN_HOME%\bin\</code><br/>命令提示符下：</p>
<pre><code class="cmd">mvn -v
</code></pre>
<p>配置 <code>\conf\settings.xml</code> 文件，查找下面这行代码：</p>
<pre><code class="cmd">&lt;localRepository&gt;本地仓库路径&lt;/localRepository&gt;
</code></pre>
<p>命令提示符下：</p>
<pre><code class="cmd">mvn help:system
</code></pre>
<h2><a href="#nexus安装" name="nexus安装"></a>Nexus安装</h2>
<p>解压 <a href="https://www.sonatype.com/download-oss-sonatype">https://www.sonatype.com/download-oss-sonatype</a> <code>2.XX</code> 版本<br/>编辑环境变量 <code>Path</code> ，追加 <code>解压根目录\nexus-版本\bin\</code></p>
<p>命令提示符下：</p>
<pre><code class="cmd">nexus    
nexus { console : start : stop : restart : install : uninstall }

nexus install （可能会报错）
nexus console （也可以启动）
</code></pre>
<h2><a href="#创建私有nexus" name="创建私有nexus"></a>创建私有nexus</h2>
<p><a href="http://localhost:8081/nexus">http://localhost:8081/nexus</a></p>
<p>默认管理用户名和密码为 <code>admin/admin123</code></p>
<ol>
  <li>
    <p>
    <p>Repositories -&gt; add hosted repository</p></p>
    <p>添加两个repository， repository policy分别为release和snapshot</p>
  </li>
  <li>
    <p>privileges -&gt; add</p>
    <p>给两个库添加权限 ： name = 库名-privileges</p>
  </li>
  <li>
    <p>roles -&gt; add nexus role</p>
    <p>添加role，分别为刚才添加的两个库的（view/create/delete/read/update）</p>
  </li>
  <li>
    <p>users -&gt; add nexus user</p>
    <p>添加user，role为刚添加的role</p>
  </li>
</ol>
<h2><a href="#发布项目到私有nexus" name="发布项目到私有nexus"></a>发布项目到私有nexus</h2>
<p>maven仓库的 <code>setting.xml</code> 里面配置</p>
<pre><code class="xml line-numbers">&lt;servers&gt;
	&lt;server&gt;
		&lt;id&gt;my-nexus-snapshots&lt;/id&gt;
		&lt;username&gt;my-nexus&lt;/username&gt;
		&lt;password&gt;admin123&lt;/password&gt;
	&lt;/server&gt;
	&lt;server&gt;
		&lt;id&gt;my-nexus-releases&lt;/id&gt;
		&lt;username&gt;my-nexus&lt;/username&gt;
		&lt;password&gt;admin123&lt;/password&gt;
	&lt;/server&gt;
&lt;/servers&gt;
</code></pre>
<p>要发布的maven项目里面的pom.xml 文件配置</p>
<pre><code class="xml line-numbers">&lt;distributionManagement&gt;
    &lt;snapshotRepository&gt;
        &lt;id&gt;my-nexus-snapshots&lt;/id&gt;
        &lt;name&gt;User Porject Snapshot&lt;/name&gt;
        &lt;url&gt;http://localhost:8081/nexus/content/repositories/my-nexus-snapshots&lt;/url&gt;
        &lt;uniqueVersion&gt;false&lt;/uniqueVersion&gt;
    &lt;/snapshotRepository&gt;
    &lt;repository&gt;
        &lt;id&gt;my-nexus-releases&lt;/id&gt;
        &lt;name&gt;User Porject Release&lt;/name&gt;
        &lt;url&gt;http://localhost:8081/nexus/content/repositories/my-nexus-releases&lt;/url&gt;
    &lt;/repository&gt;
&lt;/distributionManagement&gt;
</code></pre>
<h2><a href="#添加jar到私有库" name="添加jar到私有库"></a>添加jar到私有库</h2>
<p>在windows的cmd命令下，参考下面安装命令安装jar包。注意：这个命令不能换行</p>
<p>安装指定文件到本地仓库命令：<code>mvn install:install-file</code></p>
<ol>
  <li><code>-DgroupId=&lt;groupId&gt;</code>: 设置项目代码的包名(一般用组织名)</li>
  <li><code>-DartifactId=&lt;artifactId&gt;</code>: 设置项目名或模块名</li>
  <li><code>-Dversion=1.0.0</code>: 版本号</li>
  <li><code>-Dpackaging=jar</code>: 什么类型的文件(jar包)</li>
  <li><code>-Dfile=&lt;myfile.jar&gt;</code>: 指定jar文件路径与文件名(同目录只需文件名)</li>
</ol>
<p>安装命令实例：</p>
<pre><code class="cmd">mvn install:install-file -DgroupId=com.baidu -DartifactId=ueditor -Dversion=1.0.0 -Dpackaging=jar -Dfile=ueditor-1.1.2.jar
</code></pre><h1><a href="#springboot学习笔记" name="springboot学习笔记"></a>SpringBoot学习笔记</h1>
<h2><a href="#环境支持" name="环境支持"></a>环境支持</h2>
<blockquote>
  <p>JDK8+</p>
</blockquote>
<h2><a href="#学习基础" name="学习基础"></a>学习基础</h2>
<blockquote>
  <p>Spring MVC</p>
  <p>Maven</p>
  <p>装软件</p>
</blockquote>
<h2><a href="#部署springboot" name="部署springboot"></a>部署SpringBoot</h2>
<h3><a href="#springboot支持" name="springboot支持"></a>SpringBoot支持</h3>
<pre><code class="xml line-numbers">&lt;parent&gt;
	&lt;groupld&gt;org.springframework.boot&lt;/groupld&gt;
	&lt;artifactld&gt;spring-boot-starter-parent&lt;/artifactld&gt;
	&lt;version&gt;1.5.9.RELEASE&lt;/version&gt;
&lt;/parent&gt;
</code></pre>
<h3><a href="#增加web支持" name="增加web支持"></a>增加Web支持</h3>
<pre><code class="xml line-numbers">&lt;dependency&gt;
	&lt;groupid&gt;org.springframework.boot&lt;/groupid&gt;
	&lt;artifactid&gt;spring-boot-starter-web&lt;/artifactid&gt;
&lt;/dependency&gt;
</code></pre>
<h3><a href="#热部署支持" name="热部署支持"></a>热部署支持</h3>
<pre><code class="xml line-numbers">&lt;dependency&gt;
	&lt;groupid&gt;org.springframework.boot&lt;/groupid&gt;
	&lt;artifactid&gt;spring-boot-devtools&lt;/artifactid&gt;
	&lt;optional&gt;true&lt;/optional&gt;
&lt;/dependency&gt;
</code></pre>
<h3><a href="#restful支持" name="restful支持"></a>RESTFul支持</h3>
<pre><code>@RestController
</code></pre>
<h3><a href="#服务器配置" name="服务器配置"></a>服务器配置</h3>
<table>
  <thead>
    <tr>
      <th>属性</th>
      <th>描述</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>server.address </td>
      <td>服务器E 绑定地址，如果你的主机上有多个网卡，可以绑定一个IP 地址</td>
    </tr>
    <tr>
      <td>server.session.timeout </td>
      <td>会话过期时间，以秒为单位</td>
    </tr>
    <tr>
      <td>server.error.path </td>
      <td>服务器出错后的处理路径 /error</td>
    </tr>
    <tr>
      <td>server.servlet.contextpath </td>
      <td>Spring Boot 应用的上下文</td>
    </tr>
    <tr>
      <td>server.port </td>
      <td>Spring Boot应用监听端口</td>
    </tr>
  </tbody>
</table>
<h3><a href="#配置启动信息" name="配置启动信息"></a>配置启动信息</h3>
<p>resources目录下新建一个 banner.txt ，启动时候会输出 banner.txt 里面的内容。</p>
<p>浏览器显示的 logo 小图标 ，可以在顶层布局页面里添加:</p>
<pre><code class="html">&lt;link rel=&quot;shortcut icon&quot; href=&quot;图片地址&quot;/&gt;
</code></pre>
<p>或在 resources/static 目录下添加 favicon.ico 图标文件，默认也会覆盖 spring boot 的默认图标</p>
<h2><a href="#日志配置" name="日志配置"></a>日志配置</h2>
<p>application.properties 中加入以下代码：</p>
<pre><code class="properties line-numbers">logging.level.root=info
# org 包下的日志级别 指定默认的级别是 info ，但包名是 org 开头的类，日志级别是 warn 。 org 包名的类大多是第三方依赖库， 有时候没有必要显示 INFO 级别， com.xxx 开头的类使用 debug 。
logging.level.org=warn
logging.level.com.xxx=debug
# Spring Boot 默认井未输出日志到文件，可以指定日志输出
logging.file=my.log
# 日志输出到 my.log 中，位于 Spring Boot 应用运行的当前目录，比如项目工程目录下，也
可以指定日志存放的路径
logging.path=e:/temp/log
# Spring Boot 支持对控制台日志输出和文件输出进行格式控制，代码如下（仅使用内置的 logback )
logging.pattern.console=%level %date{HH:mm : ss} %logger{20}. %M %L:%m%n
logging.pattern.file=%level %date{IS08601} [%thread]%logger {20}.%M %L:%m%n

• %level ， 表示输出日志级别。
• %date ，表示日志发生时的时间， HH:mm：“输出时分秒，比较合适用于控制台查看，IS08601 则是标准日期输出 ，相当于 yyyy-MM-dd HH:mm:ss.SSS 。
• %logger ， 用于输出Logger 的名字，包名＋类名，{n} 限定了输出长度，如果输出长度不够，尽可能显示类名、压缩包名。
• %thread ，当前线程名。
• %L ，日志调用所在代码行，线上运行时不建议使用此参数，因为获取代码行对性能有消耗。
• %p ， 输出日志信息的优先级，即DEBUG，INFO，WARN，ERROR，FATAL。
• %d ， 输出日志时间点的日期或时间，默认格式为ISO8601，也可以在其后指定格式，如 ， %d{yyyy/MM/ddHH:mm:ss,SSS}。
• %r ， 输出自应用程序启动到输出该log信息耗费的毫秒数。
• %t ， 输出产生该日志事件的线程名。
• %l ， 输出日志事件的发生位置，相当于%c.%M(%F:%L)的组合，包括类全名、方法、文件名以及在代码中的行数。例如 ， test.TestLog4j.main(TestLog4j.java:10)。
• %c ， 输出日志信息所属的类目，通常就是所在类的全名。
• %M ， 输出产生日志信息的方法名。
• %F ， 输出日志消息产生时所在的文件名称。
• %m: ， 输出代码中指定的具体日志信息。
• %n ， 输出一个回车换行符，Windows平台为&quot;\r\n&quot;，Unix平台为&quot;\n&quot;。
• %x ， 输出和当前线程相关联的NDC(嵌套诊断环境)，尤其用到像 java servlets 这样的多客户多线程的应用中。
• %% ， 输出一个&quot;%&quot;字符。
• 另外，还可以在%与格式字符之间加上修饰符来控制其最小长度、最大长度、和文本的对齐方式。如 ，
	1) c ， 指定输出category的名称，最小的长度是20，如果category的名称长度小于20的话，默认的情况下右对齐。
	2)%-20c ， &quot;-&quot;号表示左对齐。
	3)%.30c ， 指定输出category的名称，最大的长度是30，如果category的名称长度大于30的话，就会将左边多出的字符截掉，但小于30的话也不会补空格。
</code></pre>
<p>也可以通过在 resources 目录下使用 logback.xml 或者 logback-spring.xml 来对 Logback 进行更详细的配置。</p>
<ul>
  <li>org.apache.log4j.ConsoleAppender（控制台）</li>
  <li>org.apache.log4j.FileAppender（文件）</li>
  <li>org.apache.log4j.DailyRollingFileAppender（每天产生一个日志文件）</li>
  <li>org.apache.log4j.RollingFileAppender（文件大小到达指定尺寸的时候产生一个新的文件）</li>
  <li>org.apache.log4j.WriterAppender（将日志信息以流格式发送到任意指定的地方）</li>
</ul>
<pre><code class="xml line-numbers">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;included&gt;
	&lt;include resource=&quot;org/springframework/boot/logging/logback/defaults.xml&quot;/&gt;

	&lt;springProperty scope=&quot;context&quot; name=&quot;springAppName&quot; source=&quot;spring.application.name&quot;/&gt;
	&lt;springProperty scope=&quot;context&quot; name=&quot;destination&quot; source=&quot;logstash.destination&quot;/&gt;
	&lt;springProperty scope=&quot;context&quot; name=&quot;kafkadestination&quot; source=&quot;kafka.destination&quot;/&gt;
	&lt;conversionRule conversionWord=&quot;ip&quot; converterClass=&quot;cn.xxx.IPLogConfig&quot; /&gt;
	&lt;!-- Example for logging into the build folder of your project --&gt;
	&lt;property name=&quot;LOG_FILE&quot; value=&quot;${log_file_path:-build}/logs/${springAppName}/${hostname}/${springAppName}&quot;/&gt;​

	&lt;!-- You can override this to have a custom pattern --&gt;
	&lt;property name=&quot;CONSOLE_LOG_PATTERN&quot;
				value=&quot;%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}&quot;/&gt;

	&lt;!-- Appender to log to console --&gt;
	&lt;appender name=&quot;console&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;
		&lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;
			&lt;!-- Minimum logging level to be presented in the console logs--&gt;
			&lt;level&gt;DEBUG&lt;/level&gt;
		&lt;/filter&gt;
		&lt;encoder&gt;
			&lt;pattern&gt;${CONSOLE_LOG_PATTERN}&lt;/pattern&gt;
			&lt;charset&gt;utf8&lt;/charset&gt;
		&lt;/encoder&gt;
	&lt;/appender&gt;

	&lt;!-- Appender to log to file --&gt;​
	&lt;appender name=&quot;flatfile&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
		&lt;file&gt;${LOG_FILE}&lt;/file&gt;
		&lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;
			&lt;fileNamePattern&gt;${LOG_FILE}.%d{yyyy-MM-dd}.gz&lt;/fileNamePattern&gt;
			&lt;maxHistory&gt;7&lt;/maxHistory&gt;
		&lt;/rollingPolicy&gt;
		&lt;encoder&gt;
			&lt;pattern&gt;${CONSOLE_LOG_PATTERN}&lt;/pattern&gt;
			&lt;charset&gt;utf8&lt;/charset&gt;
		&lt;/encoder&gt;
	&lt;/appender&gt;

	&lt;!-- Appender to log to file in a JSON format --&gt;
	&lt;appender name=&quot;logstashFile&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
		&lt;file&gt;${LOG_FILE}.json&lt;/file&gt;
		&lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;
			&lt;fileNamePattern&gt;${LOG_FILE}.json.%d{yyyy-MM-dd}.gz&lt;/fileNamePattern&gt;
			&lt;maxHistory&gt;7&lt;/maxHistory&gt;
		&lt;/rollingPolicy&gt;
		&lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot; charset=&quot;UTF-8&quot;&gt;
			&lt;!-- 使用自定义的JsonFactory的装饰器,禁用jackson对非ascii码字符进行escape编码 --&gt;
			&lt;jsonFactoryDecorator class=&quot;org.xxx.MyJsonFactoryDecorator&quot;/&gt;
			&lt;providers&gt;
				&lt;timestamp&gt;
					&lt;timeZone&gt;UTC&lt;/timeZone&gt;
				&lt;/timestamp&gt;
				&lt;pattern&gt;
					&lt;pattern&gt;
						{
						&quot;createTime&quot;: &quot;%d{yyyy-MM-dd HH:mm:ss.SSS}&quot;,
						&quot;severity&quot;: &quot;%level&quot;,
						&quot;service&quot;: &quot;${springAppName:-}&quot;,
						&quot;trace&quot;: &quot;%X{X-B3-TraceId:-}&quot;,
						&quot;span&quot;: &quot;%X{X-B3-SpanId:-}&quot;,
						&quot;parent&quot;: &quot;%X{X-B3-ParentSpanId:-}&quot;,
						&quot;exportable&quot;: &quot;%X{X-Span-Export:-}&quot;,
						&quot;pid&quot;: &quot;${PID:-}&quot;,
						&quot;restUrl&quot;:&quot;%X{restUrl}&quot;,
						&quot;thread&quot;: &quot;%thread&quot;,
						&quot;class&quot;: &quot;%logger{40}&quot;,
						&quot;line_number&quot;: &quot;%line&quot;,
						&quot;info&quot;: &quot;%message&quot;,
						&quot;stack_trace&quot;: &quot;%exception{5}&quot;,
						&quot;host&quot;:&quot;%ip&quot;
						}
					&lt;/pattern&gt;
				&lt;/pattern&gt;
				&lt;stackTrace&gt;
					&lt;throwableConverter class=&quot;net.logstash.logback.stacktrace.ShortenedThrowableConverter&quot;&gt;
						&lt;maxDepthPerThrowable&gt;2&lt;/maxDepthPerThrowable&gt;
						&lt;maxLength&gt;2048&lt;/maxLength&gt;
						&lt;rootCauseFirst&gt;true&lt;/rootCauseFirst&gt;
					&lt;/throwableConverter&gt;
				&lt;/stackTrace&gt;
			&lt;/providers&gt;
		&lt;/encoder&gt;
	&lt;/appender&gt;

	&lt;!-- Appender to log to file in a JSON format --&gt;
	&lt;appender name=&quot;logstash&quot; class=&quot;net.logstash.logback.appender.LogstashTcpSocketAppender&quot;&gt;
		&lt;destination&gt;${destination}&lt;/destination&gt;
		&lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot; charset=&quot;UTF-8&quot;&gt;
			&lt;!-- 使用自定义的JsonFactory的装饰器,禁用jackson对非ascii码字符进行escape编码 --&gt;
			&lt;jsonFactoryDecorator class=&quot;org.xxx.MyJsonFactoryDecorator&quot;/&gt;
			&lt;providers&gt;
				&lt;timestamp&gt;
					&lt;timeZone&gt;UTC&lt;/timeZone&gt;
				&lt;/timestamp&gt;
				&lt;pattern&gt;
					&lt;pattern&gt;
						{
						&quot;createTime&quot;: &quot;%d{yyyy-MM-dd HH:mm:ss.SSS}&quot;,
						&quot;severity&quot;: &quot;%level&quot;,
						&quot;service&quot;: &quot;${springAppName:-}&quot;,
						&quot;trace&quot;: &quot;%X{X-B3-TraceId:-}&quot;,
						&quot;span&quot;: &quot;%X{X-B3-SpanId:-}&quot;,
						&quot;parent&quot;: &quot;%X{X-B3-ParentSpanId:-}&quot;,
						&quot;exportable&quot;: &quot;%X{X-Span-Export:-}&quot;,
						&quot;pid&quot;: &quot;${PID:-}&quot;,
						&quot;restUrl&quot;:&quot;%X{restUrl}&quot;,
						&quot;thread&quot;: &quot;%thread&quot;,
						&quot;clazz&quot;: &quot;%logger{40}&quot;,
						&quot;linenumber&quot;: &quot;%line&quot;,
						&quot;info&quot;: &quot;%message&quot;,
						&quot;stacktrace&quot;: &quot;%exception{5}&quot;,
						&quot;host&quot;:&quot;%ip&quot;
						}
					&lt;/pattern&gt;
				&lt;/pattern&gt;
			&lt;/providers&gt;
		&lt;/encoder&gt;
	&lt;/appender&gt;

	&lt;!-- This is the kafkaAppender --&gt;
	&lt;appender name=&quot;kafkaAppender&quot; class=&quot;com.github.danielwegener.logback.kafka.KafkaAppender&quot;&gt;
		&lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot; charset=&quot;UTF-8&quot;&gt;
			&lt;!-- 使用自定义的JsonFactory的装饰器,禁用jackson对非ascii码字符进行escape编码 --&gt;
			&lt;jsonFactoryDecorator class=&quot;org.xxx.MyJsonFactoryDecorator&quot;/&gt;
			&lt;providers&gt;
				&lt;timestamp&gt;
					&lt;timeZone&gt;UTC&lt;/timeZone&gt;
				&lt;/timestamp&gt;
				&lt;pattern&gt;
					&lt;pattern&gt;
						{
						&quot;createTime&quot;: &quot;%d{yyyy-MM-dd HH:mm:ss.SSS}&quot;,
						&quot;severity&quot;: &quot;%level&quot;,
						&quot;service&quot;: &quot;${springAppName:-}&quot;,
						&quot;trace&quot;: &quot;%X{X-B3-TraceId:-}&quot;,
						&quot;span&quot;: &quot;%X{X-B3-SpanId:-}&quot;,
						&quot;parent&quot;: &quot;%X{X-B3-ParentSpanId:-}&quot;,
						&quot;exportable&quot;: &quot;%X{X-Span-Export:-}&quot;,
						&quot;pid&quot;: &quot;${PID:-}&quot;,
						&quot;restUrl&quot;:&quot;%X{restUrl}&quot;,
						&quot;thread&quot;: &quot;%thread&quot;,
						&quot;clazz&quot;: &quot;%logger{40}&quot;,
						&quot;linenumber&quot;: &quot;%line&quot;,
						&quot;info&quot;: &quot;%message&quot;,
						&quot;stacktrace&quot;: &quot;%exception{5}&quot;,
						&quot;host&quot;:&quot;%ip&quot;
						}
					&lt;/pattern&gt;
				&lt;/pattern&gt;
			&lt;/providers&gt;
		&lt;/encoder&gt;
		&lt;topic&gt;logs&lt;/topic&gt;
		&lt;keyingStrategy class=&quot;com.github.danielwegener.logback.kafka.keying.NoKeyKeyingStrategy&quot;/&gt;
		&lt;deliveryStrategy class=&quot;com.github.danielwegener.logback.kafka.delivery.AsynchronousDeliveryStrategy&quot;/&gt;

		&lt;!-- Optional parameter to use a fixed partition --&gt;
		&lt;!-- &lt;partition&gt;0&lt;/partition&gt; --&gt;

		&lt;!-- Optional parameter to include log timestamps into the kafka message --&gt;
		&lt;!-- &lt;appendTimestamp&gt;true&lt;/appendTimestamp&gt; --&gt;

		&lt;!-- each &lt;producerConfig&gt; translates to regular kafka-client config (format: key=value) --&gt;
		&lt;!-- producer configs are documented here: https://kafka.apache.org/documentation.html#newproducerconfigs --&gt;
		&lt;!-- bootstrap.servers is the only mandatory producerConfig --&gt;
		&lt;producerConfig&gt;bootstrap.servers=${kafkadestination}&lt;/producerConfig&gt;

		&lt;!-- this is the fallback appender if kafka is not available. --&gt;
		&lt;appender-ref ref=&quot;flatfile&quot;/&gt;
	&lt;/appender&gt;

	&lt;appender name=&quot;ASYNC&quot; class=&quot;ch.qos.logback.classic.AsyncAppender&quot;&gt;
		&lt;appender-ref ref=&quot;kafkaAppender&quot; /&gt;
	&lt;/appender&gt;

	&lt;!--生产环境--&gt;
	&lt;logger name=&quot;druid.sql.Statement&quot; level=&quot;DEBUG&quot;/&gt;
	&lt;root level=&quot;INFO&quot;&gt;
		&lt;appender-ref ref=&quot;console&quot;/&gt;
		&lt;appender-ref ref=&quot;ASYNC&quot;/&gt;
	&lt;/root&gt;
	&lt;jmxConfigurator/&gt;
&lt;/included&gt;
</code></pre>
<h2><a href="#打包配置" name="打包配置"></a>打包配置</h2>
<p>1.以 jar 文件运行</p>
<pre><code class="xml line-numbers">&lt;build&gt;
	&lt;plugins&gt;
		&lt;plugin&gt;
		&lt;groupid&gt;org.springframework.boot&lt;/groupid&gt;
		&lt;artifactid&gt;spring-boot-maven-plugin&lt;/artifactid&gt;
		&lt;configuration&gt;
			&lt;executable&gt;true&lt;/executable&gt;
		&lt;/configuration&gt;
		&lt;/plugin&gt;
	&lt;/plugins&gt;
&lt;/build&gt;
</code></pre>
<p>2.以 war 方式部署</p>
<pre><code class="xml line-numbers">&lt;project ...&gt;
	&lt;artifactid&gt;ch8.deploy&lt;/artifactid&gt;
	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
	&lt;packaging&gt;war&lt;/packaging&gt;
&lt;/project&gt;

&lt;dependencies&gt;
	&lt; !--…--&gt;
	&lt;dependency&gt;
		&lt;groupid&gt;org.springframework.boot&lt;/groupid&gt;
		&lt;artifactid&gt;spring-boot-starter-tomcat&lt;/artifactid&gt;
		&lt;scope&gt;provided&lt;/scope&gt;
	&lt;/dependency&gt;
	&lt;!--...--&gt;
&lt;/dependencies&gt;
</code></pre>
<p>另外 启动类还要实现 SpringBootServletinitializer</p>
<pre><code class="java line-numbers">@SpringBootApplication
public class Ch8Application extends SpringBootServletinitializer {
	@Override
	protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
	return application.sources(Ch8Application.class) ;
	}
	public static void main(String[] args) {
	SpringApplication.run(Ch8Application.class, args) ;
	}
}
</code></pre>
<h2><a href="#多环境部署" name="多环境部署"></a>多环境部署</h2>
<p>需要在 resource 下创建 application-{profile}.properties 的配置文件， 其中 profile 可以是任意名字，比如：</p>
<ul>
  <li>test ， 表示测试环境</li>
  <li>prod ，表示线上环境</li>
  <li>pre-prod ， 预发布环境</li>
  <li>demo1.0 ， 1.0 版本演示环境</li>
</ul>
<p>在环境变量中， spring.profiles.active 指定使用哪个profile ， 比如：</p>
<blockquote>
  <p>java -jar -Dspring.profiles.active=prod target/ch8.deploy-0.0.1-SNAPSHOT.jar</p>
</blockquote>
<p>以上配置启动后， Spring Boot 将读取 resources/application-prod.properties 配置文件，覆盖默认的application. properties 选项。application. properties 的内容如下：</p>
<blockquote>
  <p>server . port=8080</p>
</blockquote>
<p>application-prod.properties 的内容如下：</p>
<blockquote>
  <p>server.port=9000</p>
</blockquote>
<p>如果使用war 方式部署， 添加系统属性是比较好的方式，下面以Tomcat 为例进行说明。编辑 catalina . sh ， 在sh 文件的开头部分添加如下内容：</p>
<blockquote>
  <p>JAVA_OPTS =&ldquo;-Dspring.profiles.active=prod&rdquo;</p>
</blockquote>
<p>在多环境部署中，通常 resources 目录下可能没有目标环境的配置文件 ，这主要是为了安全考虑，开发环境不应该有线上环境的各种配置信息。可以将配置文件放到特定的目录中，并用 spring.config.location 指定配置文件的目录：</p>
<blockquote>
  <p>java -jar -Dspring.config.location=file:env/ -Dspring.profiles.active=test target/ch8.deploy-0.0.1-SNAPSHOT.jar</p>
</blockquote>
<p>@Profile 搭配 @Bean 、@Configuration 等自动执行配置可以定义在不同环境下是否生效，例如：</p>
<ul>
  <li>@Profile({&ldquo;test&rdquo;, &ldquo;prod&rdquo;}) ，测试环境和线上环境生效</li>
  <li>@Profile({&ldquo;test&rdquo;, &ldquo;!prod&rdquo;}) ，测试环境和非线上环境生效</li>
</ul>
<h2><a href="#测试用例" name="测试用例"></a>测试用例</h2>
<pre><code class="xml line-numbers">&lt;dependency&gt;
	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
	&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<pre><code class="java line-numbers">@RunWith(SpringRunner.class)
// 需要测试的Controller
@WebMvcTest(UserController.class)
public class UserControllerTest{
	@Autowired
	private MockMvc mvc ;
	@MockBean
	UserService userService ;
	@Test
	public void testMvc() throws Exception {
		int userid = 10 ;
		int expectedCredit = 100 ;
		// 模拟userService
		given(this.userService.getCredit(userid)).wil1Return(l00);
		// mvc 调用
		mvc.perform(get(&quot;user/{Id}&quot;, userid)).andExpect(content().string(String.valueOf(expectedCredi t)));
	}
}
</code></pre>
<h3><a href="#mockmvc模拟请求" name="mockmvc模拟请求"></a>mockMvc模拟请求</h3>
<p>1.模拟一个Post请求：</p>
<pre><code class="java">mockMvc.perform(get(&quot;/hotels?foo={foo}&quot;,&quot;bar&quot;));
</code></pre>
<p>2.模拟一个Post请求：</p>
<pre><code class="java">mockMvc.perform(post(&quot;/hotels/{id}&quot;, 42) ;
</code></pre>
<p>3.模拟文件上传：</p>
<pre><code class="java">mockMvc.perform(multipart(&quot;/doc&quot;).file(&quot;file&quot;,&quot;文件内容&quot;.getBytes(&quot;UTF-8&quot;)));
</code></pre>
<p>4.模拟请求参数：</p>
<pre><code class="java line-numbers">//模拟提交message 参数
mvc.perform(get(&quot;/user/{id}/{name}&quot;, userid, name).param(&quot;message&quot;,&quot;hello&quot;));
//模拟一个checkbox提交
mvc.perform(get(&quot;/user/{id}/{name}&quot;,userid,name).param(&quot;job&quot;，&quot;IT&quot;，&quot;gov&quot;).param(...));
//直接使用MultiValueMap 构造参数
LinkedMul ti ValueMap pa rams = new LinkedMul ti ValueMap () ;
pararns.put(&quot;message&quot;,&quot;hello&quot;);
pararns.put(&quot;job&quot;,&quot;IT&quot;);
pararns.put(&quot;job&quot;,&quot;gov&quot;);
mvc.perforrn(get(&quot;/user/{id)/{narne}&quot;,user!d,name).param(params));
</code></pre>
<p>5.模拟Session和Cookie:</p>
<pre><code class="java">mvc.perforrn(get(&quot;/user.html&quot;).sessionAttr(name,value));
mvc.perforrn(get(&quot;/user.html&quot;).cookie(new Cookie(name, value))) ;
</code></pre>
<p>6.设置HTTP Body 内容，比如提交的JSON:</p>
<pre><code class="java">String json = mvc.perforrn(get(&quot;/user.html&quot;).content(json));
</code></pre>
<p>7.设置HTTP Header:</p>
<pre><code class="java">mvc.perforrn(get(&quot;/user/{id}/{narne}&quot;,userid,narne)
	.contentType(&quot;application/x-www-forrn-urlencoded&quot;)//HTTP提交内容
	.accept(&quot;application/json&quot;)//期望返回内容
	.header(headerl,valuel)) //设直HTTP头
</code></pre>
<h3><a href="#mockito模拟数据" name="mockito模拟数据"></a>Mockito模拟数据</h3>
<pre><code class="java line-numbers">@RunWith(MockitoJUnitRunner.class)
public class CreditServiceMockTest{
	@Test
	public void test(){
		int userid = 10;
		//创建Mock 对象
		CreditSystemService creditService= mock(CreditSystemService.class);
		//模拟Mock 对象调用，传入任何 int 位都将返回1000 积分
		when(creditServrice.getUserCredit(anyInt())).thenReturn(1000);
		//when(creditService.getUserCredit(any(int.class))).thenReturn(lOOO);
		//实际调用
		int ret = creditService . getUserCredit(lO);
		// 比较期望值和返回佳
		assertEquals(1000 , ret);
	}
}
</code></pre>
<h2><a href="#集成swagger" name="集成swagger"></a>集成Swagger</h2>
<h3><a href="#swagger2" name="swagger2"></a>Swagger2</h3>
<p>1.Maven依赖添加</p>
<pre><code class="xml line-numbers">&lt;dependency&gt;
	&lt;groupId&gt;io.springfox&lt;/groupId&gt;
	&lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;
	&lt;version&gt;2.6.1&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
	&lt;groupId&gt;io.springfox&lt;/groupId&gt;
	&lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;
	&lt;version&gt;2.6.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>2.配置添加</p>
<pre><code class="java line-numbers">@Configuration
@EnableSwagger2
public class Swagger2 {
	@Bean
	public Docket createRestApi() {
		return new Docket(DocumentationType.SWAGGER_2)
				.apiInfo(apiInfo())
				.select()
				.apis(RequestHandlerSelectors.basePackage(&quot;com.forezp.controller&quot;))
				.paths(PathSelectors.any())
				.build();
	}
	private ApiInfo apiInfo() {
		return new ApiInfoBuilder()
				.title(&quot;SpringBoot利用Swagger构建Api文档&quot;)
				.description(&quot;简单优雅的Restfun风格，http://blog.csdn.net/forezp&quot;)
				.termsOfServiceUrl(&quot;http://blog.csdn.net/forezp&quot;)
				.version(&quot;1.0&quot;)
				.build();
	}
}
</code></pre>
<p>3.添加文档描述<br/>* @Api：修饰整个类，描述Controller的作用<br/>* @ApiOperation：描述一个类的一个方法，或者说一个接口<br/>* @ApiParam：单个参数描述<br/>* @ApiModel：用对象来接收参数<br/>* @ApiProperty：用对象接收参数时，描述对象的一个字段<br/>* @ApiResponse：HTTP响应其中1个描述<br/>* @ApiResponses：HTTP响应整体描述<br/>* @ApiIgnore：使用该注解忽略这个API<br/>* @ApiError ：发生错误返回的信息<br/>* @ApiParamImplicitL：一个请求参数<br/>* @ApiParamsImplicit 多个请求参数</p>
<h3><a href="#swagger3" name="swagger3"></a>Swagger3</h3>
<p><a href="https://swagger.io/blog/news/announcing-openapi-3-0/">了解学习</a></p>
<h2><a href="#集成-mongodb" name="集成-mongodb"></a>集成 MongoDB</h2>
<pre><code class="xml line-numbers">&lt;dependency&gt;
	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
	&lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>还需要在配置文件 application.properties 中配置：</p>
<pre><code class="properties">spring.data.mongodb.uri=mongodb://127.0.0.1:27017/baike
#若开启了登陆功能，test是内置数据库名，123%abc!是密码，% 字符在 URI 中使用 %25
spring.data.mongodb.uri=mongodb ://test:123%25abc!@127.0.0.1:27017/baike
</code></pre>
<h2><a href="#集成-redis" name="集成-redis"></a>集成 Redis</h2>
<pre><code class="xml line-numbers">&lt;dependency&gt;
	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
	&lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>还需要在配置文件 application.properties 中配置：</p>
<pre><code class="properties">spring.redis.host=127.0.0.1
spring.redis.password=Redis!l23
spring.redis.port=6379
#最大连接数
spring.redis.pool.max-active=8
</code></pre>
<pre><code class="java line-numbers">@Autowired
private StringRedisTemplate redisClient;

redisClient.opsForValue().set(&quot;key1&quot;, value1);
String str = red工sClient.opsForValue().get(&quot;key1&quot;);
</code></pre>
<pre><code class="java line-numbers">@Autowired
@Qualifier(&quot;redisTernplate&quot;)
private RedisTernplate redisClient;

redisClient.opsForValue().set (&quot;key1&quot;, User.getSampleUser());
User uer = (User)redisClient.opsForValue().get(&quot;key1&quot;);
</code></pre>
<h2><a href="#集成-elasticsearch" name="集成-elasticsearch"></a>集成 Elasticsearch</h2>
<pre><code class="xml line-numbers">&lt;dependency&gt;
	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
	&lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>还需要在配置文件 application.properties 中配置：</p>
<pre><code class="properties">spring.data.elasticsearch.cluster-nodes=127.0.0.1:9300
</code></pre>
<p>使用方法详细参考：<br/>* <a href="https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#repositories.query-methods">https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#repositories.query-methods</a><br/>* <a href="https://www.cnblogs.com/Alandre/p/7055838.html">https://www.cnblogs.com/Alandre/p/7055838.html</a></p>
<h2><a href="#集成-spring-cache" name="集成-spring-cache"></a>集成 Spring Cache</h2>
<p>1.添加 Maven 依赖</p>
<pre><code class="xml line-numbers">&lt;dependency&gt;
	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
	&lt;artifactId&gt;spring-boot-starter-data-cache&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>2.还需要在配置文件 application.properties 中配置：</p>
<pre><code class="properties">#使用 Spring Boot 自带的缓存
spring.cache.type=Simple

• Simple，基于 ConcurrentHashMap 实现的缓存，适合单体应用或者开发环境使用
• none，关闭缓存，比如开发阶段为了确保功能正确，可以先禁止使用缓存
• redis，使用 Redis 作为缓存，还需要在 porn 中增加 Redis 依赖
• Generic，用户自定义缓存实现，用户需要实现一个 org.springframework.cache.CacheManager 的实现
• 其他还有 JCache、 EhCache 2.x, Hazelcast 等
</code></pre>
<p>3.要在启动类上添加 @EnableCaching 注解，打开缓存功能</p>
<p>4.注解驱动</p>
<ul>
  <li>@Cacheable，作用在方法上，触发缓存读取操作</li>
  <li>@CacheEvict，作用在方法上，触发缓存失效操作</li>
  <li>@CachePut，作用在方法上，触发缓存更新操作</li>
  <li>@Cache，作用在方法上，综合上面的各种操作，在有些场景下，调用业务会触发多种缓存操作</li>
  <li>@CacheConfig，在类上设置当前缓存的一些公共设置</li>
</ul>
<h3><a href="#集成-redis-缓存" name="集成-redis-缓存"></a>集成 Redis 缓存</h3>
<pre><code class="xml line-numbers">&lt;dependency&gt;
	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
	&lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>还需要在配置文件 application.properties 中配置：</p>
<pre><code class="properties line-numbers">spring.cache.type=Redis
spring.redis.host=127.0.0.1
spring.redis.password=Redis!l23
spring.redis.port=6379
</code></pre>
<p>用法与自带缓存一致，注解驱动</p>
<h3><a href="#redis-两级缓存" name="redis-两级缓存"></a>Redis 两级缓存</h3>
<p>由于网络访问 Redis 效率可能还比自带的缓存要低，RedisCacheManager 和 RedisCache 在访 问 Redis 之前，先访问一个 ConcurrentHashMap 实现的简单一级缓存，如果有缓存项，则返回 给应用，如果没有，再从 Redis 中取得，并将缓存对象放到一级缓存中。实现方法：扩展 RedisCacheManager 并且实现 Cache 接口，自 @Configuration 注入 @Bean 实现 CacheManager 服务，具体自行实验。</p>
<p>如今比较流行的做法是将 SpringBoot + Mybatis + Redis 二级缓存，在对应的 Mapper.xml 中注入你扩展实现 Cache 的类：</p>
<pre><code class="xml line-numbers">&lt;cache type=&quot;com.xxx.MybatisRedisCache&quot;/&gt;
</code></pre>
<h2><a href="#水平扩展" name="水平扩展"></a>水平扩展</h2>
<p>一般情况下，SpringBoot 的同一个服务会部署多套，这样保证了：</p>
<ul>
  <li>单个应用者机不会停止服务，升级应用可以逐个升级而不必停止服务</li>
  <li>提高了应用整体的吞吐量</li>
</ul>
<h3><a href="#配置-nginx" name="配置-nginx"></a>配置 Nginx</h3>
<pre><code class="json line-numbers">http {
	include mime.types;
	default type application/octet-stream;
	sendfile on;
	keepalive timeout 65;
	upstream backend {
		server 127.0.0.1:9000;
		server 127.0.0.1:9001;
	}
	server {
		listen 80 ;
		server name localhost;
		location / {
			proxy pass http://backend;
		}
	}
}
</code></pre>
<h2><a href="#spring-session" name="spring-session"></a>Spring Session</h2>
<pre><code class="properties">spring.session.store-type=Redis|JDBC|Hazelcast|none
</code></pre>
<ul>
  <li>Redis, Session 数据存放 Redis 中，通常使用该方式存储 SESSION</li>
  <li>JDBC， 会话数据存放在数据库中，默认情况下 SPRING_SESSION 表存放 Session 基 本信息 ，如 sessionld 、创建时间、 最后一次访问时间等 ， SPING_SESSION ATTIBUTES 存放了 session 数据， ATTIBUTE_NAME 列保存了 Session 的 Key, ATTIBUTE_BYTES 列以字节形式保存了 Session 的 Value, Spring Session 会自动创 建这两张表</li>
  <li>Hazelcast, Session 数据存放到 Hazeleast</li>
  <li>None，禁用 Spring Session 功能</li>
</ul>
<p>Redis 里面查看 Session：</p>
<pre><code>&gt;keys spring:session:*

&gt;hgetall &quot;spring:session:sessions:863c7e73-8249-4780-a08e-Off2bdddda86&quot;

&gt;HMGET &quot;spring:session:sessions:863c7e73-8249-4780-a08e一O ff2bdddda86&quot;
</code></pre>
<p>Nginx + Redis ，水平扩展的 SpringBoot 服务，将 Session 存储在 Redis 后，即使一台服务器挂了，对应用户的 Session 也不会丢失，不需要重新登录等等。</p>
<h2><a href="#集成-zookeeper" name="集成-zookeeper"></a>集成 ZooKeeper</h2>
<pre><code>• 自动重连，无须开发人员关心
• 提供简单的 API 来操作 zk 节点，还有 zk 事件， API 是链式操作风格
• Curator 实现了 ZooKeeper 提供的所有应用场景（除了两阶段提交〉，有以下实现
    。 领导节点选取
    。 分布式锁
    。 分布式读写锁
    。 共享信号量
    。 栅栏和双重 Double Barrier
    。 分布式计数器，支持 integer 和 long
    。 分布式队列和分布式优先级队列
    。 服务注册和发现
</code></pre>
<pre><code class="xml line-numbers">&lt;dependency&gt;
	&lt;groupId&gt;org.apache.curator&lt;/groupId&gt;
	&lt;artifactId&gt;curator-recipes&lt;/artifactId&gt;
	&lt;version&gt;2.12.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<pre><code class="properties">zk.url=l27.0.0.1:2181
</code></pre>
<pre><code class="java line-numbers">@Configuration
public class ZookeeperConf {
	@Value (&quot;${zk.url}&quot;)
	private String zkUrl;
	@Bean
	public CuratorFramework getCuratorFramework() {
		RetryPolicy retryPolicy =new ExponentialBackoffRetry(lOOO, 3);
		CuratorFramework client= CuratorFrameworkFactory.newClient(zkUrl, retryPolicy) ;
		client.getCuratorListenable().addListener(new CuratorListener() {
			public void eventReceived(CuratorFramework client, CuratorEvent event) throws Exception {
				CuratorEventType type= event.getType();
				if (type == CuratorEventType.WATCHED) {
					WatchedEvent we = event.getWatchedEvent();
					EventType et = we.getType();
					client.checkExists().watched().forPath(we.getPath());
				}
			}
		});
		client.start() ;
		return client;
	}
}
</code></pre>
<h3><a href="#分布式锁使用" name="分布式锁使用"></a>分布式锁使用</h3>
<pre><code class="java line-numbers">@Autowired
CuratorFramework zkClient;

publiC void makeOrderType(String type) {
	String path = &quot;/lock/order/&quot; + type;
	try{
		InterProcessMutex lock= new InterProcessMutex(zkClient, path) ;
		if (lock.acquire(10, TimeUnit.HOURS)) {
			try {
				// 模拟耗时 5 秒
				Thread.sleep(1000*5);
				// 即使获得分布式锁，在实际业务处理过程中，也应该检查数据是否已经被处理
			} finally {
				lock.release();
			}
		}
	}catch(Exception ex) { // zk 异常
		ex.printStackTrace();
	}
}
</code></pre>
<p>也可以通过注解来定义：</p>
<pre><code class="java line-numbers">@ClusterLock (&quot;/lock/order&quot;)
publiC void makeOrderType(String type) {
	try {
		// 模拟耗时 5 秒
		Thread.sleep(1000*5);
		// 即使获得分布式锁，在实际业务处理过程中，也应该检查数据是否已经被处理
	} finally {
		lock.release();
	}
}
</code></pre>
<h3><a href="#服务注册" name="服务注册"></a>服务注册</h3>
<pre><code class="xml line-numbers">&lt;dependency&gt;
	&lt;groupId&gt;org.apache.curator&lt;/groupId&gt;
	&lt;artifactId&gt;curator-x-discovery&lt;/artifactId&gt;
	&lt;version&gt;2.12.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<pre><code class="java line-numbers">protected void registerSerivce (CuratorFramework client) throws Exception {
	// 构造一个服务描述
	ServiceinstanceBuilder&lt;Map&gt; service =ServiceInstance.builder();
	service.address(&quot;192.168.1.100&quot;）；
	service.port(8080);
	service.name(&quot;book&quot;);
	Map config =new HashMap();
	config.put(&quot;url&quot;,&quot;/api/v3/book&quot;);
	service.payload(config);
	Serviceinstance&lt;Map&gt; instance = service.build();
	ServiceDiscovery&lt;Map&gt; serviceDiscovery = ServiceDiscoveryBuilder.builder(Map.class).client(client)
		.serializer(new JsoninstanceSerializer&lt;Map&gt;(Map.class)).basePath(&quot;/service&quot;).build();//服务注册
	serviceDiscovery.registerService(instance);
	serviceDiscovery.start();
}
</code></pre>
<h2><a href="#应用监控" name="应用监控"></a>应用监控</h2>
<pre><code class="xml line-numbers">&lt;dependency&gt;
	&lt;groupId&gt;org.apache.curator&lt;/groupId&gt;
	&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>配置文件添加如下配置：</p>
<pre><code class="properties line-numbers">endpoints.default.web.enabled=true
#设置系统监控的访问端口
management.port=8081
#所有的监控都在 /application 下，你可以更改配置，修改成你想要的路径
#management.context-path=/manage
</code></pre>
<ul>
  <li>Http监控查看URL：http://localhost:8081/application/trace</li>
  <li>日志查看URL：http://localhost:8081/application/loggers
    <ul>
      <li>如果定义了日志文件，还可以查看日志文件：http://localhost:8081/application/logfile</li>
    </ul>
  </li>
  <li>线程核信息URL：http://localhost:8081/application/dump</li>
  <li>内存信息URL：http://localhost:8081/application/heapdump</li>
  <li>其他的有 mappings 、beans 监控映射和Bean</li>
  <li>health： 查看所在应用的健康状态， 如磁盘、数据源、 Redis、 Elasticsearch</li>
  <li>metrics： 显示 Spring Boot 的性能指标，如己有内存、未占用内存、垃圾回收次数、类 信息等</li>
  <li>env： 显示 Spring Boot 环境变量，如使用的 JDK 版本、加载的 jar 包、配置文件信息、 日志文件信息</li>
  <li>configprops： 所有＠ConfigurationProperties 注解的配置信息，如文件上传的最大允许 配置等</li>
  <li>autoconfig：显示所有自动装配类的报告，以及是什么原因导致自动装配成功或者不成功</li>
</ul><h1><a href="#git学习笔记" name="git学习笔记"></a>Git学习笔记</h1>
<pre><code class="git">git clone https://github.com/petterobam/my-sqlite.git
cd my-sqlite/
git status
git add .
git status
git commit -m &quot;提交备注&quot;
git pull
git push
git config --global credential.helper store
push你的代码 (git push), 这时会让你输入用户名和密码, 这一步输入的用户名密码会被记住, 下次再push代码时就不用输入用户名密码!这一步会在用户目录下生成文件.git-credential记录用户名密码的信息

git init
git remote add origin git@github.com:petterobam/database-oop.git
补充提交
git commit -m &#39;initial commit&#39;
git add forgotten_file
git commit --amend

撤销add 所有
git reset HEAD
git reset HEAD 文件名
</code></pre>
<h2><a href="#设置全局用户" name="设置全局用户"></a>设置全局用户</h2>
<pre><code class="git">$ git config --global user.name &quot;John Doe&quot;
$ git config --global user.email johndoe@example.com
</code></pre>
<h2><a href="#自定义全局编辑器" name="自定义全局编辑器"></a>自定义全局编辑器</h2>
<pre><code class="git">$ git config --global core.editor emacs
</code></pre>
<h2><a href="#查看git配置信息" name="查看git配置信息"></a>查看git配置信息</h2>
<pre><code class="git">$ git config --list
user.name=John Doe
user.email=johndoe@example.com
color.status=auto
color.branch=auto
color.interactive=auto
color.diff=auto
...
</code></pre>
<h2><a href="#检查git某一项配置" name="检查git某一项配置"></a>检查git某一项配置</h2>
<pre><code class="git">$ git config user.name
John Doe
</code></pre>
<h2><a href="#获取命令帮助说明" name="获取命令帮助说明"></a>获取命令帮助说明</h2>
<pre><code class="git line-numbers">$ git help &lt;verb&gt;
$ git &lt;verb&gt; --help
$ man git-&lt;verb&gt;
</code></pre>
<pre><code class="git">$ git help config
</code></pre>
<h2><a href="#已有项目中初始化仓库" name="已有项目中初始化仓库"></a>已有项目中初始化仓库</h2>
<pre><code class="git">$ git init
</code></pre>
<h2><a href="#添加提交" name="添加提交"></a>添加提交</h2>
<pre><code class="git">$ git add *.c
$ git add LICENSE
$ git commit -m &#39;initial project version&#39;
</code></pre>
<h2><a href="#克隆现有项目" name="克隆现有项目"></a>克隆现有项目</h2>
<pre><code class="git">$ git clone https://github.com/libgit2/libgit2
$ git clone user@server:path/to/repo.git
</code></pre>
<h2><a href="#检查当前文件状态" name="检查当前文件状态"></a>检查当前文件状态</h2>
<pre><code class="git">$ git status
On branch master
nothing to commit, working directory clean
</code></pre>
<pre><code class="git">$ git status
On branch master
Untracked files:
  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)

    README.md

nothing added to commit but untracked files present (use &quot;git add&quot; to track)
</code></pre>
<pre><code class="git">$ git status
On branch master
Changes to be committed:
  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)

    new file:   README.md
</code></pre>
<h2><a href="#状态概览" name="状态概览"></a>状态概览</h2>
<pre><code class="git">$ git status -s
 M README
MM Rakefile
A  lib/git.rb
M  lib/simplegit.rb
?? LICENSE.txt
</code></pre>
<h2><a href="#查看改变的部分" name="查看改变的部分"></a>查看改变的部分</h2>
<pre><code class="git">$ git diff
diff --git a/CONTRIBUTING.md b/CONTRIBUTING.md
index 8ebb991..643e24f 100644
--- a/CONTRIBUTING.md
+++ b/CONTRIBUTING.md
@@ -65,7 +65,8 @@ branch directly, things can get messy.
 Please include a nice description of your changes when you submit your PR;
 if we have to read the whole diff to figure out why you&#39;re contributing
 in the first place, you&#39;re less likely to get feedback and have your change
-merged in.
+merged in. Also, split your changes into comprehensive chunks if your patch is
+longer than a dozen lines.

 If you are starting to work on a particular area, feel free to submit a PR
 that highlights your work in progress (and note in the PR title that it&#39;s
</code></pre>
<h2><a href="#list查看改变的部分" name="list查看改变的部分"></a>list查看改变的部分</h2>
<pre><code class="git">$ git diff --cached
diff --git a/CONTRIBUTING.md b/CONTRIBUTING.md
index 8ebb991..643e24f 100644
--- a/CONTRIBUTING.md
+++ b/CONTRIBUTING.md
@@ -65,7 +65,8 @@ branch directly, things can get messy.
 Please include a nice description of your changes when you submit your PR;
 if we have to read the whole diff to figure out why you&#39;re contributing
 in the first place, you&#39;re less likely to get feedback and have your change
-merged in.
+merged in. Also, split your changes into comprehensive chunks if your patch is
+longer than a dozen lines.

 If you are starting to work on a particular area, feel free to submit a PR
 that highlights your work in progress (and note in the PR title that it&#39;s

	- 高版本list查看改变的部分
	$ git diff --staged
	diff --git a/README b/README
	new file mode 100644
	index 0000000..03902a1
	--- /dev/null
	+++ b/README
	@@ -0,0 +1 @@
	+My Project
</code></pre>
<h2><a href="#代码提交" name="代码提交"></a>代码提交</h2>
<pre><code class="git">$ git commit
</code></pre>
<h2><a href="#提交带上备注" name="提交带上备注"></a>提交带上备注</h2>
<pre><code class="git">$ git commit -m &quot;Story 182: Fix benchmarks for speed&quot;
</code></pre>
<h2><a href="#直接提交-含git-add-" name="直接提交-含git-add-"></a>直接提交(含git add)</h2>
<pre><code class="git">跳过缓存区，不用git add命令，直接提交
$ git commit -a -m &#39;added new benchmarks&#39;
</code></pre>
<h2><a href="#将文件移出版本管理" name="将文件移出版本管理"></a>将文件移出版本管理</h2>
<pre><code class="git">$ git rm README.md
$ git rm --cached README.md
$ git rm log/\*.log
</code></pre>
<h2><a href="#移动文件-重命名某个文件" name="移动文件-重命名某个文件"></a>移动文件，重命名某个文件</h2>
<pre><code class="git">$ git mv file_from file_to
</code></pre>
<h2><a href="#查看提交日志" name="查看提交日志"></a>查看提交日志</h2>
<pre><code class="git">$ git log
commit ca82a6dff817ec66f44342007202690a93763949
Author: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Mon Mar 17 21:52:11 2008 -0700

    changed the version number

commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7
Author: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Sat Mar 15 16:40:33 2008 -0700

    removed unnecessary test

commit a11bef06a3f659402fe7563abf99ad00de2209e6
Author: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Sat Mar 15 10:31:28 2008 -0700

    first commit
</code></pre>
<h2><a href="#显示详细提交记录数量" name="显示详细提交记录数量"></a>显示详细提交记录数量</h2>
<pre><code class="git">$ git log -p -2
commit ca82a6dff817ec66f44342007202690a93763949
Author: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Mon Mar 17 21:52:11 2008 -0700

    changed the version number

diff --git a/Rakefile b/Rakefile
index a874b73..8f94139 100644
--- a/Rakefile
+++ b/Rakefile
@@ -5,7 +5,7 @@ require &#39;rake/gempackagetask&#39;
 spec = Gem::Specification.new do |s|
     s.platform  =   Gem::Platform::RUBY
     s.name      =   &quot;simplegit&quot;
-    s.version   =   &quot;0.1.0&quot;
+    s.version   =   &quot;0.1.1&quot;
     s.author    =   &quot;Scott Chacon&quot;
     s.email     =   &quot;schacon@gee-mail.com&quot;
     s.summary   =   &quot;A simple gem for using Git in Ruby code.&quot;

commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7
Author: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Sat Mar 15 16:40:33 2008 -0700

    removed unnecessary test

diff --git a/lib/simplegit.rb b/lib/simplegit.rb
index a0a60ae..47c6340 100644
--- a/lib/simplegit.rb
+++ b/lib/simplegit.rb
@@ -18,8 +18,3 @@ class SimpleGit
     end

 end
-
-if $0 == __FILE__
-  git = SimpleGit.new
-  puts git.show
-end
</code></pre>
<h2><a href="#提交日志统计信息" name="提交日志统计信息"></a>提交日志统计信息</h2>
<pre><code class="git">$ git log --stat
commit ca82a6dff817ec66f44342007202690a93763949
Author: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Mon Mar 17 21:52:11 2008 -0700

    changed the version number

 Rakefile | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7
Author: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Sat Mar 15 16:40:33 2008 -0700

    removed unnecessary test

 lib/simplegit.rb | 5 -----
 1 file changed, 5 deletions(-)

commit a11bef06a3f659402fe7563abf99ad00de2209e6
Author: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Sat Mar 15 10:31:28 2008 -0700

    first commit

 README           |  6 ++++++
 Rakefile         | 23 +++++++++++++++++++++++
 lib/simplegit.rb | 25 +++++++++++++++++++++++++
 3 files changed, 54 insertions(+)
</code></pre>
<h2><a href="#提交日志每次记录一行展示" name="提交日志每次记录一行展示"></a>提交日志每次记录一行展示</h2>
<pre><code class="git">$ git log --pretty=oneline
ca82a6dff817ec66f44342007202690a93763949 changed the version number
085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7 removed unnecessary test
a11bef06a3f659402fe7563abf99ad00de2209e6 first commit
</code></pre>
<h2><a href="#定义日志浏览输出格式" name="定义日志浏览输出格式"></a>定义日志浏览输出格式</h2>
<pre><code class="git">$ git log --pretty=format:&quot;%h - %an, %ar : %s&quot;
ca82a6d - Scott Chacon, 6 years ago : changed the version number
085bb3b - Scott Chacon, 6 years ago : removed unnecessary test
a11bef0 - Scott Chacon, 6 years ago : first commit
-------------------------------------------------
%H	提交对象（commit）的完整哈希字串
%h	提交对象的简短哈希字串
%T	树对象（tree）的完整哈希字串
%t	树对象的简短哈希字串
%P	父对象（parent）的完整哈希字串
%p	父对象的简短哈希字串
%an	作者（author）的名字
%ae	作者的电子邮件地址
%ad	作者修订日期（可以用 --date= 选项定制格式）
%ar	作者修订日期，按多久以前的方式显示
%cn	提交者（committer）的名字
%ce	提交者的电子邮件地址
%cd	提交日期提交日期
%cr	提交日期，按多久以前的方式显示
%s	提交说明
-------------------------------------------------
</code></pre>
<h2><a href="#日志浏览截止时间或范围" name="日志浏览截止时间或范围"></a>日志浏览截止时间或范围</h2>
<pre><code class="git">$ git log --since=2.weeks
</code></pre>
<h2><a href="#日志浏览根据作者筛选" name="日志浏览根据作者筛选"></a>日志浏览根据作者筛选</h2>
<pre><code class="git">$ git log --author=bob
</code></pre>
<pre><code class="git line-numbers">-------------------------------------------------
-(n)	仅显示最近的 n 条提交
--since, --after	仅显示指定时间之后的提交。
--until, --before	仅显示指定时间之前的提交。
--author	仅显示指定作者相关的提交。
--committer	仅显示指定提交者相关的提交。
--grep	仅显示含指定关键字的提交
-S	仅显示添加或移除了某个关键字的提交
-------------------------------------------------
</code></pre>
<h2><a href="#尝试重提" name="尝试重提"></a>尝试重提</h2>
<pre><code class="git">尝试重提上一个还未push的提交
$ git commit --amend
然后可以git add或git commit 重新写注释
</code></pre>
<h2><a href="#撤销git-add" name="撤销git-add"></a>撤销git add</h2>
<pre><code class="git">$ git reset HEAD CONTRIBUTING.md
</code></pre>
<h2><a href="#还原某个文件到上一个版本" name="还原某个文件到上一个版本"></a>还原某个文件到上一个版本</h2>
<pre><code class="git">$ git checkout -- CONTRIBUTING.md
</code></pre>
<h2><a href="#查看远程仓库信息" name="查看远程仓库信息"></a>查看远程仓库信息</h2>
<pre><code class="git">$ git clone https://github.com/schacon/ticgit
$ cd ticgit
$ git remote -v
origin    git@github.com:mojombo/grit.git (fetch)
origin    git@github.com:mojombo/grit.git (push)
</code></pre>
<h2><a href="#添加远程仓库版本" name="添加远程仓库版本"></a>添加远程仓库版本</h2>
<pre><code class="git">$ git remote add pb https://github.com/paulboone/ticgit
$ git remote -v
origin	https://github.com/schacon/ticgit (fetch)
origin	https://github.com/schacon/ticgit (push)
pb	https://github.com/paulboone/ticgit (fetch)
pb	https://github.com/paulboone/ticgit (push)
</code></pre>
<h2><a href="#拉取分支但本地没有的信息" name="拉取分支但本地没有的信息"></a>拉取分支但本地没有的信息</h2>
<pre><code class="git">$ git fetch pb
remote: Counting objects: 43, done.
remote: Compressing objects: 100% (36/36), done.
remote: Total 43 (delta 10), reused 31 (delta 5)
Unpacking objects: 100% (43/43), done.
From https://github.com/paulboone/ticgit
 * [new branch]      master     -&gt; pb/master
 * [new branch]      ticgit     -&gt; pb/ticgit
</code></pre>
<h2><a href="#将内容提交到远程仓库" name="将内容提交到远程仓库"></a>将内容提交到远程仓库</h2>
<pre><code class="git">git push [remote-name] [branch-name]
$ git push origin master
</code></pre>
<h2><a href="#查看远程仓库" name="查看远程仓库"></a>查看远程仓库</h2>
<pre><code class="git">$ git remote show origin
$ git remote show origin
* remote origin
  Fetch URL: https://github.com/schacon/ticgit
  Push  URL: https://github.com/schacon/ticgit
  HEAD branch: master
  Remote branches:
    master                               tracked
    dev-branch                           tracked
  Local branch configured for &#39;git pull&#39;:
    master merges with remote master
  Local ref configured for &#39;git push&#39;:
    master pushes to master (up to date)
</code></pre>
<h2><a href="#远程仓库重命名" name="远程仓库重命名"></a>远程仓库重命名</h2>
<pre><code class="git">$ git remote rename pb paul
$ git remote
origin
paul
</code></pre>
<h2><a href="#远程仓库删除" name="远程仓库删除"></a>远程仓库删除</h2>
<pre><code class="git">$ git remote rm paul
$ git remote
origin
</code></pre>
<h2><a href="#列出已有标签" name="列出已有标签"></a>列出已有标签</h2>
<pre><code class="git">$ git tag
v0.1
v1.3

$ git tag -l &#39;v1.8.5*&#39;
v1.8.5
v1.8.5-rc0
v1.8.5-rc1
v1.8.5-rc2
v1.8.5-rc3
v1.8.5.1
v1.8.5.2
v1.8.5.3
v1.8.5.4
v1.8.5.5
</code></pre>
<h2><a href="#创建附注标签" name="创建附注标签"></a>创建附注标签</h2>
<pre><code class="git">$ git tag -a v1.4 -m &#39;my version 1.4&#39;
$ git tag
v0.1
v1.3
v1.4
</code></pre>
<pre><code class="git">$ git show v1.4
tag v1.4
Tagger: Ben Straub &lt;ben@straub.cc&gt;
Date:   Sat May 3 20:19:12 2014 -0700

my version 1.4

commit ca82a6dff817ec66f44342007202690a93763949
Author: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Mon Mar 17 21:52:11 2008 -0700

    changed the version number
</code></pre>
<h2><a href="#创建轻量标签" name="创建轻量标签"></a>创建轻量标签</h2>
<pre><code class="git">$ git tag v1.4-lw
$ git tag
v0.1
v1.3
v1.4
v1.4-lw
v1.5
</code></pre>
<pre><code class="git">$ git show v1.4-lw
commit ca82a6dff817ec66f44342007202690a93763949
Author: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Mon Mar 17 21:52:11 2008 -0700

    changed the version number
</code></pre>
<h2><a href="#给某次提交记录打标签" name="给某次提交记录打标签"></a>给某次提交记录打标签</h2>
<pre><code class="git">$ git tag -a v1.2 9fceb02
$ git show v1.2
tag v1.2
Tagger: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Mon Feb 9 15:32:16 2009 -0800

version 1.2
commit 9fceb02d0ae598e95dc970b74767f19372d61af8
Author: Magnus Chacon &lt;mchacon@gee-mail.com&gt;
Date:   Sun Apr 27 20:43:35 2008 -0700

    updated rakefile
...
</code></pre>
<h2><a href="#共享标签到远程仓库" name="共享标签到远程仓库"></a>共享标签到远程仓库</h2>
<pre><code class="git">$ git push origin v1.5
</code></pre>
<pre><code class="git">$ git push origin --tags
</code></pre>
<h2><a href="#检出标签" name="检出标签"></a>检出标签</h2>
<pre><code class="git">git checkout -b [branchname] [tagname]
$ git checkout -b version2 v2.0.0
Switched to a new branch &#39;version2&#39;
</code></pre>
<h2><a href="#为git命令设置别名" name="为git命令设置别名"></a>为git命令设置别名</h2>
<pre><code class="git">$ git config --global alias.co checkout
$ git config --global alias.br branch
$ git config --global alias.ci commit
$ git config --global alias.st status

$ git config --global alias.unstage &#39;reset HEAD --&#39;
$ git unstage fileA
等同于 git reset HEAD -- fileA

$ git config --global alias.last &#39;log -1 HEAD&#39;
$ git last
commit 66938dae3329c7aebe598c2246a8e6af90d04646
Author: Josh Goebel &lt;dreamer3@example.com&gt;
Date:   Tue Aug 26 19:48:51 2008 +0800

    test for current head

    Signed-off-by: Scott Chacon &lt;schacon@example.com&gt;

$ git config --global alias.visual &#39;!gitk&#39;
git config --global gui.encoding utf-8
</code></pre>
<h2><a href="#切换分支" name="切换分支"></a>切换分支</h2>
<pre><code class="git">$ git checkout [barcher-name]
</code></pre>
<h2><a href="#在某个问题上建立一个分支" name="在某个问题上建立一个分支"></a>在某个问题上建立一个分支</h2>
<pre><code class="git">比如：问题##53
$ git checkout -b iss53
或者
$ git branch iss53
$ git checkout iss53

比如有个紧急问题分支，先切换到紧急分支
$ git checkout -b hotfix
</code></pre>
<h2><a href="#将紧急分支merge到主干" name="将紧急分支merge到主干"></a>将紧急分支merge到主干</h2>
<pre><code class="git">$ git checkout master
$ git merge hotfix
</code></pre>
<h2><a href="#紧急分支切换回来继续工作" name="紧急分支切换回来继续工作"></a>紧急分支切换回来继续工作</h2>
<pre><code class="git">解决问题后删除紧急分支，然后切换回来继续解决原来问题
$ git branch -d hotfix
$ git checkout iss53
$ git checkout master
Switched to branch &#39;master&#39;
$ git merge iss53
Merge made by the &#39;recursive&#39; strategy.
index.html |    1 +
1 file changed, 1 insertion(+)
$ git branch -d iss53
</code></pre>
<h2><a href="#merge冲突解决" name="merge冲突解决"></a>merge冲突解决</h2>
<pre><code class="git">图形化界面
$ git mergetool
</code></pre>
<h2><a href="#分支管理" name="分支管理"></a>分支管理</h2>
<pre><code class="git">$ git branch
  iss53
* master
  testing

$ git branch -v
  iss53   93b412c fix javascript issue
* master  7a98805 Merge branch &#39;iss53&#39;
  testing 782fd34 add scott to the author list in the readmes

$ git branch --merged
查看合并过的分支
在这个列表中分支名字前没有 * 号的分支通常可以使用 git branch -d 删除掉

$ git branch --no-merged
查看未合并过的分支
</code></pre>
<h2><a href="#远程分支" name="远程分支"></a>远程分支</h2>
<pre><code class="git">“origin” 并无特殊含义
远程仓库名字 “origin” 与分支名字 “master” 一样，在 Git 中并没有任何特别的含义一样。 同时 “master” 是当你运行 git init 时默认的起始分支名字，原因仅仅是它的广泛使用，“origin” 是当你运行 git clone 时默认的远程仓库名字。 如果你运行 git clone -o booyah，那么你默认的远程分支名字将会是 booyah/master。

$ git push origin serverfix
将分支推送到远程仓库

$ git fetch origin
remote: Counting objects: 7, done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 3 (delta 0), reused 3 (delta 0)
Unpacking objects: 100% (3/3), done.
From https://github.com/schacon/simplegit
 * [new branch]      serverfix    -&gt; origin/serverfix

可以运行 git merge origin/serverfix 将这些工作合并到当前所在的分支。 如果想要在自己的 serverfix 分支上工作，可以将其建立在远程跟踪分支之上：
$ git checkout -b serverfix origin/serverfix
</code></pre>
<h2><a href="#跟踪分支" name="跟踪分支"></a>跟踪分支</h2>
<pre><code class="git">$ git checkout --track origin/serverfix
如果想要将本地分支与远程分支设置为不同名字，你可以轻松地增加一个不同名字的本地分支的上一个命令：
$ git checkout -b sf origin/serverfix
</code></pre>
<h2><a href="#拉取分支" name="拉取分支"></a>拉取分支</h2>
<pre><code class="git">git pull 的魔法经常令人困惑所以通常单独显式地使用 fetch 与 merge
</code></pre>
<h2><a href="#删除远程分支" name="删除远程分支"></a>删除远程分支</h2>
<pre><code class="git">假设你已经通过远程分支做完所有的工作了 - 也就是说你和你的协作者已经完成了一个特性并且将其合并到了远程仓库的 master 分支（或任何其他稳定代码分支）。 可以运行带有 --delete 选项的 git push 命令来删除一个远程分支。 如果想要从服务器上删除 serverfix 分支，运行下面的命令：
$ git push origin --delete serverfix
</code></pre>
<h2><a href="#变基" name="变基"></a>变基</h2>
<pre><code class="git">你可以使用 rebase 命令将提交到某一分支上的所有修改都移至另一分支上，就好像“重新播放”一样。

$ git checkout experiment
$ git rebase master

快进合并 master 分支，使之包含来自 client 分支的修改
$ git rebase master server

变基的风险
呃，奇妙的变基也并非完美无缺，要用它得遵守一条准则：
不要对在你的仓库外有副本的分支执行变基。
</code></pre>
<h2><a href="#官方文档" name="官方文档"></a>官方文档</h2>
<p><a href="https://git-scm.com/book/zh/v2">https://git-scm.com/book/zh/v2</a></p><h1><a href="#thymeleaf学习笔记" name="thymeleaf学习笔记"></a>thymeleaf学习笔记</h1>
<h2><a href="#基础认识" name="基础认识"></a>基础认识</h2>
<ol>
  <li>
    <p>
    <p>thymeleaf 为 <code>*.html</code>文档</p></p>
    <p><a href="https://github.com/thymeleaf">源码地址</a><br/><a href="thymeleaf/thymeleaf_3.0.5_zh_guide.pdf">中文文档PDF</a></p>
  </li>
  <li>
    <p>定义为thymeleaf文档时候，html标签上添加如下自定义属性：</p>
    <pre><code class="html">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
</code></pre>
  </li>
  <li>
    <p>如上，我们定义 <code>xmlns:th</code>，下面就可以用 <code>th</code> 作为 thymeleaf 的标识属性 <code>th</code> 标签主要有：</p>
    <pre><code class="html line-numbers">th:id		替换id	&lt;input th:id=&quot;&#39;xxx&#39; + ${collect.id}&quot;/&gt;
th:text		文本替换	&lt;p th:text=&quot;${collect.description}&quot;&gt;description&lt;/p&gt;
th:utext	支持html的文本替换	&lt;p th:utext=&quot;${htmlcontent}&quot;&gt;conten&lt;/p&gt;
th:object	替换对象	&lt;div th:object=&quot;${session.user}&quot;&gt;
th:value	属性赋值	&lt;input th:value=&quot;${user.name}&quot; /&gt;
th:with		变量赋值运算	&lt;div th:with=&quot;isEven=${prodStat.count}%2==0&quot;&gt;&lt;/div&gt;
th:style	设置样式	th:style=&quot;&#39;display:&#39; + @{(${sitrue} ? &#39;none&#39; : &#39;inline-block&#39;)} + &#39;&#39;&quot;
th:onclick	点击事件	th:onclick=&quot;&#39;getCollect()&#39;&quot;
th:each		属性赋值	tr th:each=&quot;user,userStat:${users}&quot;&gt;
th:if		判断条件	&lt;a th:if=&quot;${userId == collect.userId}&quot; &gt;
th:unless	和th:if判断相反	&lt;a th:href=&quot;@{/login}&quot; th:unless=${session.user != null}&gt;Login&lt;/a&gt;
th:href		链接地址	&lt;a th:href=&quot;@{/login}&quot; th:unless=${session.user != null}&gt;Login&lt;/a&gt; /&gt;
th:switch	多路选择 配合th:case 使用	&lt;div th:switch=&quot;${user.role}&quot;&gt;
th:case		th:switch的一个分支	&lt;p th:case=&quot;&#39;admin&#39;&quot;&gt;User is an administrator&lt;/p&gt;
th:fragment	布局标签，定义代码片段，方便其它地方引用	&lt;div th:fragment=&quot;alert&quot;&gt;
th:include	布局标签，替换内容到引入的文件	&lt;head th:include=&quot;layout :: htmlhead&quot; th:with=&quot;title=&#39;xx&#39;&quot;&gt;&lt;/head&gt;
th:replace	布局标签，替换整个标签到引入的文件	&lt;div th:replace=&quot;fragments/header :: title&quot;&gt;&lt;/div&gt;
th:selected	selected选择框 选中	th:selected=&quot;(${xxx.id} == ${configObj.dd})&quot;
th:src		图片类地址引入	&lt;img th:src=&quot;@{/img/logo.png}&quot; /&gt;
th:inline	定义js脚本可以使用变量	&lt;script type=&quot;text/javascript&quot; th:inline=&quot;javascript&quot;&gt;
th:action	表单提交的地址	&lt;form action=&quot;subscribe.html&quot; th:action=&quot;@{/subscribe}&quot;&gt;
th:remove	删除某个属性	&lt;tr th:remove=&quot;all&quot;&gt; 1.all:删除包含标签和所有的孩子。
th:attr		th:attr=&quot;src=@{/image/aa.jpg},title=#{logo}&quot;，此标签不太优雅，一般用的比较少。
</code></pre>
  </li>
</ol><h1><a href="#grunt学习笔记" name="grunt学习笔记"></a>Grunt学习笔记</h1>
<h2><a href="#概念" name="概念"></a>概念</h2>
<blockquote>
  <p>搭建自动化web前端开发环境</p>
</blockquote>
<h2><a href="#安装" name="安装"></a>安装</h2>
<ol>
  <li>
  <p>前提依赖nodejs</p></li>
  <li>
  <p>全局安装grunt命令工具：<code>npm install -g grunt-cli</code></p></li>
</ol>
<h2><a href="#文件目录" name="文件目录"></a>文件目录</h2>
<pre><code>/package.json    #必备，可以通过npm init 创建
/Gruntfile.js     #必备，可以参照https://github.com/gruntjs/grunt-init-gruntfile
</code></pre>
<p><code>package.json</code> 初始内容如下：</p>
<pre><code class="javascript">{
	&quot;name&quot;: &quot;grunt-test&quot;,
	&quot;version&quot;: &quot;1.0.0&quot;,
	&quot;devDependencies&quot;: {

	}
}
</code></pre>
<p><code>Gruntfile.js</code> 初始内容如下：</p>
<pre><code class="javascript">module.exports = function(grunt) {
	//任务配置
	grunt.initConfig({
	//获取package.json信息
	    pkg: grunt.file.readJSON(&#39;package.json&#39;)
	});
	//输入grunt默认执行什么
	grunt.registerTask(‘default’,[]);
};
</code></pre>
<h2><a href="#插件安装" name="插件安装"></a>插件安装</h2>
<ol>
  <li>通过 npm install -g grunt-init 命令安装 grunt-init</li>
  <li>通过 git clone <a href="git://github.com/gruntjs/grunt-init-gruntplugin.git">git://github.com/gruntjs/grunt-init-gruntplugin.git</a> ~/.grunt-init/gruntplugin 命令安装grunt插件模版。</li>
  <li>在一个空的目录中执行 grunt-init gruntplugin 。</li>
  <li>执行 npm install 命令以准备开发环境。</li>
  <li>为你的插件（任务）书写代码。</li>
  <li>执行 npm publish 命令将你创建的 Grunt 插件（任务）发布到npm！</li>
</ol>
<h2><a href="#文档" name="文档"></a>文档</h2>
<p><a href="http://www.gruntjs.net/getting-started">http://www.gruntjs.net/getting-started</a></p><h1><a href="#docker学习笔记" name="docker学习笔记"></a>Docker学习笔记</h1>
<h2><a href="#docker安装" name="docker安装"></a>Docker安装</h2>
<p>官网下载安装</p>
<pre><code class="cmd">docker version

Client:
 Version:      18.03.1-ce
 API version:  1.37
 Go version:   go1.9.5
 Git commit:   9ee9f40
 Built:        Thu Apr 26 07:12:48 2018
 OS/Arch:      windows/amd64
 Experimental: false
 Orchestrator: swarm

Server:
 Engine:
  Version:      18.03.1-ce
  API version:  1.37 (minimum version 1.12)
  Go version:   go1.9.5
  Git commit:   9ee9f40
  Built:        Thu Apr 26 07:22:38 2018
  OS/Arch:      linux/amd64
  Experimental: false
</code></pre>
<h2><a href="#docker部署mysql" name="docker部署mysql"></a>Docker部署MySQL</h2>
<pre><code class="cmd">docker pull mysql

docker images

docker run --name first-mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=111111 -d mysql

docker ps

docker ps -a

docker ps -q

用Navicat等客户端连接试试

docker exec -it first-mysql /bin/bash

root@17f262428195:/## mysql -uroot -p
Enter password:
mysql&gt; select user,host,password from mysql.user;
ERROR 1054 (42S22): Unknown column &#39;password&#39; in &#39;field list&#39;
mysql&gt; select user,host,authentication_string from mysql.user;
+------------------+-----------+------------------------------------------------------------------------+
| user             | host      | authentication_string                                                  |
+------------------+-----------+------------------------------------------------------------------------+
| root             | %         | $A$005$~5l&lt;oK■3♠w|x↕↓Kb▼&quot;B&amp;DWiM2vU56iRdVsCQYZZ/YjO3JjLVUCF5D8j8miag7GC |
| mysql.infoschema | localhost | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE                              |
| mysql.session    | localhost | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE                              |
| mysql.sys        | localhost | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE                              |
| root             | localhost | $A$005$eIeeny;▲.NJ\86=&gt;RZTjiT2Vl1GvBdICEP7O3E/9HftqxGJR5enw8WOZPH3 |
+------------------+-----------+------------------------------------------------------------------------+
5 rows in set (0.00 sec)

搞一波授权没成功，这个mysql版本为8.0的，有些sql执行有问题。

docker stop first-mysql

docker rm first-mysql

docker pull mysql-57-centos7

docker pull tomcat

docker pull nginx
</code></pre><h1><a href="#3d-max学习笔记" name="3d-max学习笔记"></a>3D Max学习笔记</h1>
<h2><a href="#界面" name="界面"></a>界面</h2>
<p><img src="3d-max/1.png" alt="界面" /></p>
<p><img src="3d-max/2.png" alt="界面2" /></p>
<ul>
  <li>自定义单位长度为毫米</li>
  <li>自定义锁电UI布局</li>
  <li>自定义文件备份间隔15分钟</li>
  <li>自动备份的文件在：<code>C:\Users\当前用户名\Documents\3dsMax\autoback</code> 目录下</li>
</ul>
<h2><a href="#创建" name="创建"></a>创建</h2>
<ul>
  <li>左键选形状，拖动创建，右键结束</li>
  <li>移动视图：按住鼠标滚轮</li>
  <li>视图缩放：滚动鼠标滚轮，以鼠标放的地方为中心缩放</li>
  <li>环绕观察：<code>alt</code> +鼠标滚轮</li>
  <li>最大化显示视图：<code>Z</code></li>
  <li>最大化视图：<code>alt + W</code></li>
  <li>最大化某个物体：<br/><img src="3d-max/3.png" alt="最大化某个物体" /></li>
  <li>
  <p>透明化物体：<code>alt + x</code></p></li>
  <li>显示隐藏栅格：<code>G</code></li>
</ul>
<h2><a href="#渲染" name="渲染"></a>渲染</h2>
<p><img src="3d-max/4.png" alt="渲染" /></p>
<h2><a href="#选中模式" name="选中模式"></a>选中模式</h2>
<p><img src="3d-max/5.png" alt="选中模式" /></p>
<p>自定义 - 首选项 - 按方向交叉/窗口选择</p>
<p><code>Ctrl</code> + 鼠标 累加选择<br/><code>Alt</code> + 鼠标 减选</p>
<h2><a href="#隐藏" name="隐藏"></a>隐藏</h2>
<p>Shift + 物体类型字母</p>
<p><img src="3d-max/6.png" alt="隐藏" /></p>
<h2><a href="#自动栅格" name="自动栅格"></a>自动栅格</h2>
<p>在某平面上创建基本体：勾选自动栅格</p>
<p><img src="3d-max/7.png" alt="自动栅格" /></p>
<h2><a href="#选择并移动" name="选择并移动"></a>选择并移动</h2>
<p>选择并移动：<code>W</code></p>
<p>参照物：世界坐标、局部坐标</p>
<h2><a href="#复制" name="复制"></a>复制</h2>
<p><code>Shift</code> + 鼠标拖动</p>
</article>
<footer>
    <p>© 2018 petterObam, Inc.</p>
</footer>
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-48219044-1', 'auto');
    ga('send', 'pageview');
</script>
<script>
    /*备用文章目录动态生成*/
    var articleDirectoryBuild = function () {
        var articleChildren = function children(childNodes, reg) {
                var result = [],
                    isReg = typeof reg === 'object',
                    isStr = typeof reg === 'string',
                    node, i, len;
                for (i = 0, len = childNodes.length; i < len; i++) {
                    node = childNodes[i];
                    if ((node.nodeType === 1 || node.nodeType === 9) &&
                        (!reg ||
                            isReg && reg.test(node.tagName.toLowerCase()) ||
                            isStr && node.tagName.toLowerCase() === reg)) {
                        result.push(node);
                    }
                }
                return result;
            };
        var createPostDirectory = function (article, directory, isDirNum) {
                var contentArr = [],
                    titleId = [],
                    levelArr, root, level,
                    currentList, list, li, link, i, len;
                levelArr = (function (article, contentArr, titleId) {
                    var titleElem = articleChildren(article.childNodes, /^h\d$/),
                        levelArr = [],
                        lastNum = 0,
                        lastRevNum = 0,
                        count = 0,
                        guid = 1,
                        id = 'directory' + (Math.random() + '').replace(/\D/, ''),
                        lastRevNum, num, elem;
                    while (titleElem.length) {
                        elem = titleElem.shift();
                        contentArr.push(elem.innerHTML);
                        num = +elem.tagName.match(/\d/)[0];
                        if (num > lastNum) {
                            levelArr.push(1);
                            lastRevNum += 1;
                        } else if (num === lastRevNum ||
                            num > lastRevNum && num <= lastNum) {
                            levelArr.push(0);
                            lastRevNum = lastRevNum;
                        } else if (num < lastRevNum) {
                            levelArr.push(num - lastRevNum);
                            lastRevNum = num;
                        }
                        count += levelArr[levelArr.length - 1];
                        lastNum = num;
                        elem.id = elem.id || (id + guid++);
                        titleId.push(elem.id);
                    }
                    //if (count !== 0 && levelArr[0] === 1) levelArr[0] = 0;

                    return levelArr;
                })(article, contentArr, titleId);
                currentList = root = document.createElement('ul');
                li = document.createElement('li');
                link = document.createElement('a');
                link.href = '/blog/';
                link.innerHTML = '<< 返回';
                li.appendChild(link);
                currentList.appendChild(li);
                dirNum = [];
                for (i = 0, len = levelArr.length; i < len; i++) {
                    level = levelArr[i];
                    if (level === 1) {
                        list = document.createElement('ul');
                        if (!currentList.lastElementChild) {
                            currentList.appendChild(document.createElement('li'));
                        }
                        currentList.lastElementChild.appendChild(list);
                        currentList = list;
                        dirNum.push(0);
                    } else if (level < 0) {
                        level *= 2;
                        while (level++) {
                            if (level % 2) dirNum.pop();
                            currentList = currentList.parentNode;
                        }
                    }
                    dirNum[dirNum.length - 1]++;
                    li = document.createElement('li');
                    link = document.createElement('a');
                    link.href = '#' + titleId[i];
                    link.innerHTML = !isDirNum ? contentArr[i] : dirNum.join('.') + ' ' + contentArr[i];
                    if(level === 1){
                        link.className = "flodDir";
                    }
                    li.appendChild(link);
                    currentList.appendChild(li);
                }
                directory.appendChild(root);
            };

        var upFlodDir = function(linkDomObj) {
            if(!linkDomObj.nextSibling){
                return;
            }
            if(linkDomObj.nextSibling.style.height == "10px") {
                linkDomObj.nextSibling.style.height = "auto";
                linkDomObj.parentNode.style.border = "0";
                linkDomObj.parentNode.onclick = null;
                linkDomObj.parentNode.onmouseover = null;
                linkDomObj.parentNode.onmouseout = null;
            } else {
                linkDomObj.nextSibling.style.height = "10px";
                linkDomObj.nextSibling.style.overflow = "hidden";
                linkDomObj.parentNode.style.border = "1px solid gray";
                linkDomObj.parentNode.onclick = function(){
                    linkDomObj.nextSibling.style.height = "auto";
                    linkDomObj.parentNode.style.border = "0";
                    linkDomObj.parentNode.onclick = null;
                    linkDomObj.parentNode.onmouseover = null;
                    linkDomObj.parentNode.onmouseout = null;
                };
                linkDomObj.parentNode.onmouseover = function(){
                    if(linkDomObj.nextSibling.style.height == "10px"){
                        linkDomObj.parentNode.style.border = "1px solid red";
                    }
                };
                linkDomObj.parentNode.onmouseout = function(){
                    if(linkDomObj.nextSibling.style.height == "10px"){
                        linkDomObj.parentNode.style.border = "1px solid gray";
                    }
                }
            }
        };
        createPostDirectory(document.getElementById('article-content'), document.getElementById('js-nav-directory'), true);
        var flodDirArr = document.getElementsByClassName("flodDir");
        var menubarDiv = document.getElementById("menubarDiv");
        var style = window.getComputedStyle(menubarDiv);
        var isUpFlodDir = false;
        if(style.display == "none"){
            isUpFlodDir = true;
        }
        for(var i = 0;i < flodDirArr.length;i++) {
            flodDirArr[i].ondblclick = function() {
                upFlodDir(this);
            };
            if(isUpFlodDir){
                upFlodDir(flodDirArr[i]);
            }
        }
    };

    /*初始化加载js-dir*/
    var dirEle = document.getElementById('java-nav-directory');
    if (null == dirEle || dirEle.innerHTML == "") {
        articleDirectoryBuild();
        var dirEle = document.getElementById('js-nav-directory');
    }
    /*移动端目录事件定义*/
    var mediaMenubar = document.getElementById("mediaMenubar");
    if(null != mediaMenubar){
        var dirLinkEvent = false;
        mediaMenubar.onclick = function(){
            var style = window.getComputedStyle(dirEle);
            if(style.display == "none"){
                this.className = "button_active";
                dirEle.style.display = "block";
                document.getElementsByTagName("nav")[0].style.height = "auto";
            }else {
                this.className = "button";
                dirEle.style.display = "none";
                document.getElementsByTagName("nav")[0].style.height = "48px";
            }
            dirLinkEvent = true;
        };
    }
    var aLink = dirEle.getElementsByTagName("a");
    for(i = 0;i < aLink.length;i++){
        aLink[i].onclick = function(){
            this.style.background = "#DADEFA";
            if(dirLinkEvent){
                dirEle.style.display = "none";
                document.getElementsByTagName("nav")[0].style.height = "48px";
            }
        };
    }
</script>
<script>
var codeEles = document.getElementsByTagName("code");
for (var i = 0; i < codeEles.length; i++) {
  if(codeEles[i].className != null && codeEles[i].className != ""){
    codeEles[i].className = "language-" + codeEles[i].className;
    codeEles[i].parentNode.className = codeEles[i].className;
  }
}
</script>
<script src="static/js/prism.js"></script>
</body>
</html>
                                       
